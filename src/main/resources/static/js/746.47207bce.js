"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[746],{9746:function(e,s,d){d.r(s),d.d(s,{default:function(){return z}});var a=d(3396),l=d(7139);const t=e=>((0,a.dD)("data-v-b0dd256a"),e=e(),(0,a.Cn)(),e),o={class:"content"},i=t((()=>(0,a._)("h1",null,"收货地址",-1))),n={class:"box_info"},r={class:"address_list"},c=t((()=>(0,a._)("i",{class:"el-icon-edit"},null,-1))),h=t((()=>(0,a._)("p",{style:{"font-size":"14px"}},"添加新地址",-1))),m=[c,h],u={class:"name"},g={style:{float:"right","font-size":"14px",color:"#757575"}},p={class:"tel"},f={class:"detail"},b={class:"foot"},_=["onClick"],w=["onClick"],y={class:"dialog-footer"};function A(e,s,d,t,c,h){const A=(0,a.up)("el-input"),V=(0,a.up)("el-form-item"),v=(0,a.up)("el-form"),k=(0,a.up)("el-button"),U=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",o,[i,(0,a._)("div",n,[(0,a._)("div",r,[(0,a._)("div",{class:"add",onClick:s[0]||(s[0]=(...e)=>h.handleAdd&&h.handleAdd(...e))},m)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.addressList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"address_list",key:e.id},[(0,a._)("div",u,[(0,a.Uk)((0,l.zw)(e.name)+" ",1),(0,a._)("span",g,(0,l.zw)(e.label),1)]),(0,a._)("div",p,(0,l.zw)(e.phone),1),(0,a._)("div",f,(0,l.zw)(e.addr),1),(0,a._)("div",b,[(0,a._)("span",{style:{float:"right"},onClick:s=>h.delAddress(e.id)},"删除",8,_),(0,a._)("span",{style:{float:"right","margin-right":"10px"},onClick:s=>h.handleMod(e)},"修改",8,w)])])))),128))]),(0,a.Wm)(U,{title:"添加收货地址",value:c.dialogVisible,"onUpdate:value":s[7]||(s[7]=e=>c.dialogVisible=e),width:"30%",center:""},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{ref:"form",model:c.address},{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{placeholder:"姓名",modelValue:c.address.name,"onUpdate:modelValue":s[1]||(s[1]=e=>c.address.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{placeholder:"手机号",modelValue:c.address.phone,"onUpdate:modelValue":s[2]||(s[2]=e=>c.address.phone=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{type:"textarea",placeholder:"详细地址",modelValue:c.address.addr,"onUpdate:modelValue":s[3]||(s[3]=e=>c.address.addr=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{placeholder:"地址标签",modelValue:c.address.label,"onUpdate:modelValue":s[4]||(s[4]=e=>c.address.label=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a._)("span",y,[(0,a.Wm)(k,{onClick:s[5]||(s[5]=e=>c.dialogVisible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取 消")])),_:1}),(0,a.Wm)(k,{type:"primary",onClick:s[6]||(s[6]=e=>h.onSubmit("form"))},{default:(0,a.w5)((()=>[(0,a.Uk)("确 定")])),_:1})])])),_:1},8,["value"])])}var V=d(6789);const v="http://localhost:8080",k=e=>(0,V.Z)(v+"/addUserAddress",{account:e.account,name:e.name,phone:e.phone,addr:e.addr,label:e.label},"POST"),U=e=>(0,V.Z)(v+"/modifyUserAddress",{id:e.id,account:e.account,name:e.name,phone:e.phone,addr:e.addr,label:e.label},"POST"),W=e=>(0,V.Z)(v+"/delUserAddress",{id:e}),$=e=>(0,V.Z)(v+"/getUserAddress",{account:e});var C={name:"AddressPage",data(){return{dialogVisible:!1,isEdit:!1,addressList:[{id:1,account:"黄小龙",name:"小胖",phone:"18988798892",addr:"江西抚州市临川区西大街街道东华理工大学长江学院本部(330006)",label:"家",off:!1},{id:2,account:"黄小龙",name:"小胖",phone:"18988798892",addr:"江西抚州市临川区西大街街道东华理工大学长江学院本部(330006)",label:"家",off:!1}],address:{id:null,account:"黄小龙",name:"",phone:"",addr:"",label:""}}},methods:{handleAdd(){this.dialogVisible=!0,this.isEdit=!1},handleMod(e){this.dialogVisible=!0,this.isEdit=!0,this.address.id=e.id,this.address.account=e.account,this.address.name=e.name,this.address.phone=e.phone,this.address.addr=e.addr,this.address.label=e.label},onSubmit(e){this.isEdit?this.modifyAddress():this.addAddress(),this.$refs[e].validate((e=>{e?this.isEdit?this.modifyAddress():this.addAddress():this.$message.error("地址信息不符合要求，请重试")}))},getAddressList(){console.log("===获取的地址列表：==="+this.$store.getters.getUser.account+"====="),$(this.$store.getters.getUser.account).then((e=>{console.log(e),200==e.code?(this.addressList=e.addressList,console.log("===response.addressList.length==="+e.addressList.length)):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},addAddress(){k(this.address).then((e=>{console.log(e),200==e.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},modifyAddress(){U(this.address).then((e=>{console.log(e),200==e.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},delAddress(e){this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{W(e).then((e=>{console.log(e),200==e.code?(this.$message({message:e.message,type:"success"}),this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))})).catch((()=>{console.log("取消删除了")}))}}},L=d(89);const x=(0,L.Z)(C,[["render",A],["__scopeId","data-v-b0dd256a"]]);var z=x}}]);
//# sourceMappingURL=746.47207bce.js.map