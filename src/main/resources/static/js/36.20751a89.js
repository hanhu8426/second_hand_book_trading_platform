"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[36],{170:function(e,t,s){s.d(t,{DO:function(){return o},RO:function(){return l},hP:function(){return i},qp:function(){return n}});var a=s(6779);const d="http://localhost:8080",l=e=>(0,a.Z)(d+"/addUserAddress",{name:e.name,phone:e.phone,address:e.address,area:e.area,id:e.id},"POST"),o=e=>(0,a.Z)(d+"/modifyUserAddress",{addId:e.addId,name:e.name,phone:e.phone,address:e.address,area:e.area},"POST"),n=e=>(0,a.Z)(d+"/delUserAddress",{addId:e}),i=()=>(0,a.Z)(d+"/getUserAddress",{})},9896:function(e,t,s){s.d(t,{G3:function(){return o},Ms:function(){return l},eZ:function(){return n},fA:function(){return i}});var a=s(6779);const d="http://localhost:8080",l=e=>(0,a.Z)(`${d}/getBook/${e}`),o=e=>(0,a.Z)(d+"/getRecBookList",{sort:e}),n=(e,t,s)=>(0,a.Z)(d+"/getBookListBySort",{type:e,page:t,pageSize:s}),i=(e,t,s,l)=>(0,a.Z)(d+"/getBookListByName",{name:e,author:t,page:s,pageSize:l})},7036:function(e,t,s){s.r(t),s.d(t,{default:function(){return X}});var a=s(3396),d=s(7139);const l=e=>((0,a.dD)("data-v-79c4fc1f"),e=e(),(0,a.Cn)(),e),o={style:{"background-color":"#f7f7f6",width:"100%","min-width":"1240px"}},n={class:"content"},i=l((()=>(0,a._)("div",{class:"title"},[(0,a._)("h3",null,"收货地址")],-1))),r={class:"list_box"},c={class:"name"},u={style:{float:"right","font-size":"14px",color:"#757575"}},h={class:"tel"},p={class:"detail"},m={class:"address_list"},f={class:"add"},_=l((()=>(0,a._)("i",{class:"el-icon-edit"},null,-1))),g=l((()=>(0,a._)("p",{style:{"font-size":"20px"}},"添加新地址",-1))),v=l((()=>(0,a._)("div",{class:"title"},[(0,a._)("h3",null,"商品清单")],-1))),w={class:"list_box"},b={class:"bookInfo"},k={class:"book_item"},y={class:"book_detail"},x={class:"book_num"},W={class:"book_money"},I={class:"height_text"},U=(0,a.uE)('<div class="title" data-v-79c4fc1f><h3 style="float:left;width:100px;" data-v-79c4fc1f>配送方式</h3><span class="height_text" style="margin-left:60px;" data-v-79c4fc1f>包邮</span></div><div class="title" data-v-79c4fc1f><h3 style="float:left;width:100px;" data-v-79c4fc1f>发票</h3><span class="height_text" style="margin-left:60px;" data-v-79c4fc1f>电子普通发票个人商品明细</span></div>',2),V={class:"list_box"},A={class:"order_detail"},z={class:"bill_item"},O=l((()=>(0,a._)("div",{class:"bill_title"},"商品总价:",-1))),Z={class:"bill_money height_text"},C={class:"bill_item"},L=l((()=>(0,a._)("div",{class:"bill_title"},"应付总额:",-1))),$={class:"bill_money height_text",style:{"font-size":"22px"}},S={class:"list_box"},N={class:"order_action"},D={class:"address_box"},B=l((()=>(0,a._)("span",{class:"height_text"},"修改",-1))),P={class:"action"},H={class:"dialog-footer"};function R(e,t,s,l,R,T){const E=(0,a.up)("Nav"),F=(0,a.up)("HeadNav"),G=(0,a.up)("el-button"),K=(0,a.up)("el-image"),M=(0,a.up)("Footer"),Y=(0,a.up)("el-input"),j=(0,a.up)("el-form-item"),q=(0,a.up)("el-option"),J=(0,a.up)("el-select"),Q=(0,a.up)("el-form"),X=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(E),(0,a.Wm)(F),(0,a._)("div",n,[i,(0,a._)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.addressList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:"address_list",key:e.addId},[(0,a._)("div",c,[(0,a.Uk)((0,d.zw)(e.name)+" ",1),(0,a._)("span",u,(0,d.zw)(e.label),1)]),(0,a._)("div",h,(0,d.zw)(e.phone),1),(0,a._)("div",p,(0,d.zw)(e.address),1),(0,a._)("div",null,[(0,a.Wm)(G,{onClick:e=>T.selectOrderAddress(t)},{default:(0,a.w5)((()=>[(0,a.Uk)("选择")])),_:2},1032,["onClick"])])])))),128)),(0,a._)("div",m,[(0,a._)("div",f,[_,(0,a._)("div",null,[(0,a.Wm)(G,{onClick:t[0]||(t[0]=e=>T.handleAdd())},{default:(0,a.w5)((()=>[g])),_:1})])])])]),v,(0,a._)("div",w,[(0,a._)("div",b,[(0,a._)("div",k,[(0,a.Wm)(K,{class:"bookImg",src:R.book.image,fit:"fill"},null,8,["src"]),(0,a._)("div",y,[(0,a._)("p",null,(0,d.zw)(R.book.name)+" "+(0,d.zw)(R.book.author),1)])]),(0,a._)("div",x,[(0,a._)("p",null,(0,d.zw)(R.book.price)+" x 1",1)]),(0,a._)("div",W,[(0,a._)("p",I,(0,d.zw)(R.book.price)+"元",1)])])]),U,(0,a._)("div",V,[(0,a._)("div",A,[(0,a._)("div",z,[O,(0,a._)("div",Z,(0,d.zw)(R.book.price)+"元",1)]),(0,a._)("div",C,[L,(0,a._)("div",$,(0,d.zw)(R.book.price)+"元",1)])])]),(0,a._)("div",S,[(0,a._)("div",N,[(0,a._)("div",D,[(0,a._)("p",null,(0,d.zw)(R.address.name)+" "+(0,d.zw)(R.address.phone),1),(0,a._)("p",null,[(0,a.Uk)((0,d.zw)(R.address.address),1),B])]),(0,a._)("div",P,[(0,a._)("button",{class:"plainBtn",style:{"background-color":"#ff6600",color:"white"},onClick:t[1]||(t[1]=(...e)=>T.submitOrder&&T.submitOrder(...e))},"立刻下单")])])])]),(0,a.Wm)(M),(0,a.Wm)(X,{title:"添加收货地址",modelValue:R.dialogVisible,"onUpdate:modelValue":t[8]||(t[8]=e=>R.dialogVisible=e),width:"30%",center:""},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,{ref:"form",model:R.address},{default:(0,a.w5)((()=>[(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Y,{placeholder:"姓名",modelValue:R.newAddress.name,"onUpdate:modelValue":t[2]||(t[2]=e=>R.newAddress.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Y,{placeholder:"手机号",modelValue:R.newAddress.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>R.newAddress.phone=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(j,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Y,{type:"textarea",placeholder:"详细地址",modelValue:R.newAddress.address,"onUpdate:modelValue":t[4]||(t[4]=e=>R.newAddress.address=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(j,{label:"校区"},{default:(0,a.w5)((()=>[(0,a.Wm)(J,{modelValue:R.newAddress.area,"onUpdate:modelValue":t[5]||(t[5]=e=>R.newAddress.area=e),placeholder:"请选择校区"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{label:"九龙湖校区",value:"九龙湖校区"}),(0,a.Wm)(q,{label:"四牌楼校区",value:"四牌楼校区"}),(0,a.Wm)(q,{label:"丁家桥校区",value:"丁家桥校区"})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a._)("span",H,[(0,a.Wm)(G,{onClick:t[6]||(t[6]=e=>R.dialogVisible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取 消")])),_:1}),(0,a.Wm)(G,{type:"primary",onClick:t[7]||(t[7]=e=>T.onSubmit("form"))},{default:(0,a.w5)((()=>[(0,a.Uk)("确 定")])),_:1})])])),_:1},8,["modelValue"])])}s(7658);var T=s(8841),E=s(2310),F=s(4337),G=s(170),K=s(9896),M=s(6779);const Y="http://localhost:8080",j=(e,t)=>(0,M.Z)(Y+"/addOrder",{addId:e,bookId:t},"POST");var q={name:"BuyPage",components:{Nav:T.Z,HeadNav:E.Z,Footer:F.Z},data(){return{account:"",book:null,bookId:null,selectId:null,dialogVisible:!1,addressList:[{id:1,name:"小胖",phone:"18988798892",addr:"江西抚州市临川区西大街街道东华理工大学长江学院本部(330006)",area:1,off:!1,select:!1},{id:2,name:"小胖",phone:"18988798892",addr:"江西抚州市临川区西大街街道东华理工大学长江学院本部(330006)",area:1,off:!1,select:!1}],address:{id:null,name:"",phone:"",address:"",area:null},newAddress:{id:null,name:"",phone:"",address:"",area:null}}},created(){this.bookId=this.$route.params.bookId,this.account=this.$store.getters.getUser.account,this.address.id=this.$store.getters.getUser.id,this.getBook(this.bookId),this.getAddressList(),console.log("接收到参数book："+this.book)},methods:{getBook(e){console.log("我已经传入了bookId：值为："+e),(0,K.Ms)(e).then((e=>{1===e.data.code&&(console.log("接受到code,开始为book赋值："),this.book=e.data.data,console.log("接收到的内容为："+this.book))})).catch((e=>{console.log(e)}))},handleAdd(){this.dialogVisible=!0,this.isEdit=!1},onSubmit(){this.isEdit?this.modifyAddress():(this.address=this.newAddress,this.addAddress(),this.dialogVisible=!1)},addAddress(){(0,G.RO)(this.address).then((e=>{console.log("传的地址中地址信息为："+this.address.address),console.log(e),1===e.data.code?(this.$message({message:e.data.msg,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.data.msg,type:"warning"})})).catch((e=>{console.log(e)}))},getAddressList(){(0,G.hP)().then((e=>{console.log("已经接受到response:"+e),1===e.data.code?(console.log("response.data:"+e.data),this.addressList=e.data.data,console.log("response.data.data:"+e.data.data),this.addressList.length>0&&(console.log(this.addressList[0]),this.address=this.addressList[0],this.selectId=this.addressList[0].addId)):this.$message({message:e.data.msg,type:"warning"})})).catch((e=>{console.log(e)}))},selectOrderAddress(e){this.selectId=this.addressList[e].addId,this.address=this.addressList[e]},submitOrder(){this.account=this.$store.getters.getUser.account,console.log("====this.OrderInitDto.account===="+this.account+"====="),console.log(this.bookId),console.log(parseInt(this.bookId)),console.log("对比实验"),j(parseInt(this.selectId),parseInt(this.bookId)).then((e=>{1===e.data.code?(this.$message({type:"success",message:e.data.msg,duration:1e3}),setTimeout((()=>{this.$router.push({path:"/user/userOrder"})}),1e3)):2===e.data.code&&(this.$message({message:"余额不足，请充值！！！",type:"warning"}),this.$router.push({path:"/userInfo"}))})).catch((()=>{this.$message({message:"下单失败了",type:"warning"})}))}}},J=s(89);const Q=(0,J.Z)(q,[["render",R],["__scopeId","data-v-79c4fc1f"]]);var X=Q},4337:function(e,t,s){s.d(t,{Z:function(){return h}});var a=s(3396);const d=e=>((0,a.dD)("data-v-150b6664"),e=e(),(0,a.Cn)(),e),l={class:"footer"},o=d((()=>(0,a._)("div",{class:"content"},[(0,a._)("p",null,"© 2023 想好了没组 软件学院 参考南昌大学黄龙同学作品")],-1))),n=[o];function i(e,t){return(0,a.wg)(),(0,a.iD)("div",l,n)}var r=s(89);const c={},u=(0,r.Z)(c,[["render",i],["__scopeId","data-v-150b6664"]]);var h=u},8841:function(e,t,s){s.d(t,{Z:function(){return u}});var a=s(3396);const d={class:"navClass"},l={class:"content"},o={class:"nav_content"};function n(e,t,s,n,i,r){const c=(0,a.up)("el-menu-item"),u=(0,a.up)("router-link"),h=(0,a.up)("el-submenu"),p=(0,a.up)("el-menu");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",l,[(0,a._)("div",o,[(0,a.Wm)(p,{"default-active":e.$route.path,class:"el-menu-demo",mode:"horizontal",onSelect:r.handleSelect,"background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b",router:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{index:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("首页")])),_:1}),(0,a.Wm)(h,{index:"/"},{title:(0,a.w5)((()=>[(0,a.Uk)("登陆|注册")])),default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{to:"/Login"},{default:(0,a.w5)((()=>[(0,a.Uk)("登录")])),_:1})])),_:1}),(0,a.Wm)(c,{index:"/RegisterPage"},{default:(0,a.w5)((()=>[(0,a.Uk)("注册")])),_:1}),(0,a.Wm)(c,{index:"/user/bookStall"},{default:(0,a.w5)((()=>[(0,a.Uk)("发布")])),_:1}),(0,a.Wm)(c,{index:"/Upload_3"},{default:(0,a.w5)((()=>[(0,a.Uk)("测试")])),_:1})])),_:1}),(0,a.Wm)(c,{index:"/user/mesNotice"},{default:(0,a.w5)((()=>[(0,a.Uk)("消息")])),_:1}),(0,a.Wm)(c,{index:"/user/userOrder"},{default:(0,a.w5)((()=>[(0,a.Uk)("我的订单")])),_:1}),(0,a.Wm)(c,{index:"/user"},{default:(0,a.w5)((()=>[(0,a.Uk)("个人中心")])),_:1})])),_:1},8,["default-active","onSelect"])])])])}var i={name:"NavGation",data(){return{activeIndex:"/"}},methods:{handleSelect(e,t){console.log(e,t)}}},r=s(89);const c=(0,r.Z)(i,[["render",n],["__scopeId","data-v-71d449ea"]]);var u=c},2310:function(e,t,s){s.d(t,{Z:function(){return m}});var a=s(3396),d=s(7139);const l=e=>((0,a.dD)("data-v-32d86536"),e=e(),(0,a.Cn)(),e),o={class:"headNav"},n={class:"content"},i=l((()=>(0,a._)("div",{style:{float:"left"}},[(0,a._)("div",{style:{width:"232px",height:"40px","vertical-align":"middle","font-family":"宋体","font-size":"38px","font-style":"italic"}}," 东大二手书网 ")],-1))),r={style:{float:"right"}};function c(e,t,s,l,c,u){const h=(0,a.up)("el-option"),p=(0,a.up)("el-select"),m=(0,a.up)("el-input"),f=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",n,[i,(0,a._)("div",r,[(0,a.Wm)(p,{modelValue:c.select,"onUpdate:modelValue":t[0]||(t[0]=e=>c.select=e),placeholder:"请选择",class:"search-type",onChange:u.handleOptionChange},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.type_list,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e.value,value:e.typeName},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.typeName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,a.Wm)(m,{modelValue:c.input,"onUpdate:modelValue":t[1]||(t[1]=e=>c.input=e),placeholder:"书名、作者",class:"input-with-select",style:{width:"400px",height:"40px"}},null,8,["modelValue"]),(0,a.Wm)(f,{icon:"el-icon-search",class:"search-button",onClick:u.search},{default:(0,a.w5)((()=>[(0,a.Uk)("搜索")])),_:1},8,["onClick"])])])])}s(7658);var u={name:"HeadNav",data(){return{rel:"",input:"",select:"",type_list:[{typeName:"书名",value:"0"},{typeName:"作者",value:"1"}],imgS:s(3352)}},computed:{},methods:{handleOptionChange(e){"option1"===e?this.handleOption1():"option2"===e&&this.handleOption2()},handleOption1(){this.select=0},handleOption2(){this.select=1},search(){this.$router.push({name:"Search",params:{selectResult:this.select,inputContent:this.input}})}}},h=s(89);const p=(0,h.Z)(u,[["render",c],["__scopeId","data-v-32d86536"]]);var m=p},3352:function(e,t,s){e.exports=s.p+"img/logo-250.fa9ad888.png"}}]);
//# sourceMappingURL=36.20751a89.js.map