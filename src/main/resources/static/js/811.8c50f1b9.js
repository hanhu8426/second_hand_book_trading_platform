"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[811],{5811:function(e,s,d){d.r(s),d.d(s,{default:function(){return x}});var a=d(3396),l=d(7139);const t=e=>((0,a.dD)("data-v-04f4e8a4"),e=e(),(0,a.Cn)(),e),o={class:"content"},i=t((()=>(0,a._)("h1",null,"收货地址",-1))),n={class:"box_info"},r={class:"address_list"},c=t((()=>(0,a._)("i",{class:"el-icon-edit"},null,-1))),m=t((()=>(0,a._)("p",{style:{"font-size":"14px"}},"添加新地址",-1))),h=[c,m],g={class:"name"},u={style:{float:"right","font-size":"14px",color:"#757575"}},p={class:"tel"},f={class:"detail"},_={class:"foot"},w=["onClick"],V=["onClick"],y={class:"dialog-footer"};function A(e,s,d,t,c,m){const A=(0,a.up)("el-input"),b=(0,a.up)("el-form-item"),k=(0,a.up)("el-form"),v=(0,a.up)("el-button"),U=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",o,[i,(0,a._)("div",n,[(0,a._)("div",r,[(0,a._)("div",{class:"add",onClick:s[0]||(s[0]=(...e)=>m.handleAdd&&m.handleAdd(...e))},h)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.addressList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"address_list",key:e.addId},[(0,a._)("div",g,[(0,a.Uk)((0,l.zw)(e.name)+" ",1),(0,a._)("span",u,(0,l.zw)(e.area),1)]),(0,a._)("span",p,(0,l.zw)(e.phone),1),(0,a._)("span",f,(0,l.zw)(e.addr),1),(0,a._)("div",_,[(0,a._)("span",{style:{float:"right"},onClick:s=>m.delAddress(e.addId)},"删除",8,w),(0,a._)("span",{style:{float:"right","margin-right":"10px"},onClick:s=>m.handleMod(e)},"修改",8,V)])])))),128))]),(0,a.Wm)(U,{title:"添加收货地址",modelValue:c.dialogVisible,"onUpdate:modelValue":s[7]||(s[7]=e=>c.dialogVisible=e),width:"30%",center:""},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{ref:"form",model:c.address},{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{placeholder:"姓名",modelValue:c.address.name,"onUpdate:modelValue":s[1]||(s[1]=e=>c.address.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{placeholder:"手机号",modelValue:c.address.phone,"onUpdate:modelValue":s[2]||(s[2]=e=>c.address.phone=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{type:"textarea",placeholder:"详细地址",modelValue:c.address.addr,"onUpdate:modelValue":s[3]||(s[3]=e=>c.address.addr=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{placeholder:"校区",modelValue:c.address.area,"onUpdate:modelValue":s[4]||(s[4]=e=>c.address.area=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a._)("span",y,[(0,a.Wm)(v,{onClick:s[5]||(s[5]=e=>c.dialogVisible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取 消")])),_:1}),(0,a.Wm)(v,{type:"primary",onClick:s[6]||(s[6]=e=>m.onSubmit("form"))},{default:(0,a.w5)((()=>[(0,a.Uk)("确 定")])),_:1})])])),_:1},8,["modelValue"])])}var b=d(6779);const k="http://localhost:8080",v=e=>(0,b.Z)(k+"/addUserAddress",{name:e.name,phone:e.phone,address:e.addr,area:e.area},"POST"),U=e=>(0,b.Z)(k+"/modifyUserAddress",{addId:e.addId,name:e.name,phone:e.phone,address:e.addr,area:e.area},"POST"),W=e=>(0,b.Z)(k+"/delUserAddress",{addId:e}),$=()=>(0,b.Z)(k+"/getUserAddress",{});var C={name:"AddressPage",data(){return{dialogVisible:!1,isEdit:!1,addressList:[],address:{addId:"",name:"",phone:"",addr:"",area:""}}},created(){console.log("开始生命构建，获取该用户的所有地址数据"),this.getAddressList()},methods:{handleAdd(){this.dialogVisible=!0,this.isEdit=!1},handleMod(e){this.dialogVisible=!0,this.isEdit=!0,this.address.addId=e.addId,this.address.account=e.account,this.address.name=e.name,this.address.phone=e.phone,this.address.addr=e.addr,this.address.label=e.label},onSubmit(){this.isEdit?this.modifyAddress():this.addAddress()},getAddressList(){console.log("===获取的地址列表：==="+this.$store.getters.getUser.account+"====="),$().then((e=>{if(console.log(e),1==e.data.code){let s=e.data.data;console.log(s),this.addressList=s}else this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},addAddress(e){this.$refs[e].validate((e=>{e&&v(this.address).then((e=>{console.log(e),1==e.data.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))}))},modifyAddress(){U(this.address).then((e=>{console.log(e),1==e.data.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},delAddress(e){this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{W(e).then((e=>{console.log(e),1==e.data.code?(this.$message({message:e.message,type:"success"}),this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))})).catch((()=>{console.log("取消删除了")}))},resetForm(e){this.$refs[e].resetFields()}}},I=d(89);const L=(0,I.Z)(C,[["render",A],["__scopeId","data-v-04f4e8a4"]]);var x=L}}]);
//# sourceMappingURL=811.8c50f1b9.js.map