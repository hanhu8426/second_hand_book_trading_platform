"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[197],{6789:function(e,o,t){t.d(o,{Z:function(){return a}});var l=t(8831);function a(e,o={},t="GET"){return new Promise((function(a,s){let i;if("GET"===t){let t="";Object.keys(o).forEach((e=>{t+=e+"="+o[e]+"&"})),""!==t&&(t=t.substring(0,t.lastIndexOf("&")),e=e+"?"+t),i=l.Z.get(e)}else i=l.Z.post(e,o);i.then((function(e){a(e)})).catch((function(e){s(e)}))}))}},9896:function(e,o,t){t.d(o,{G3:function(){return n},Ix:function(){return s},Ms:function(){return i},eZ:function(){return d},fA:function(){return r}});var l=t(6789);const a="http://localhost:8080",s=e=>(0,l.Z)(a+"/bookStall/uploadImg",{formData:e},"POST"),i=e=>(0,l.Z)(a+"/getBook",{id:e}),n=e=>(0,l.Z)(a+"/getRecBookList",{sort:e}),d=(e,o,t)=>(0,l.Z)(a+"/getBookListBySort",{type:e,page:o,pageSize:t}),r=(e,o,t)=>(0,l.Z)(a+"/getBookListByName",{input:e,page:o,pageSize:t})},2197:function(e,o,t){t.r(o),t.d(o,{default:function(){return A}});var l=t(3396),a=t(7139);const s=e=>((0,l.dD)("data-v-62421e2f"),e=e(),(0,l.Cn)(),e),i={class:"content"},n=s((()=>(0,l._)("h1",null,"我的书摊",-1))),d={class:"box_info"},r={class:"book_list"},c=s((()=>(0,l._)("i",{class:"el-icon-edit"},null,-1))),u=s((()=>(0,l._)("p",{style:{"font-size":"14px"}},"添加新的书籍",-1))),m=[c,u],p={class:"bookCover"},f={class:"bookName"},g={style:{float:"right","font-size":"14px",color:"#757575"}},h={class:"author"},k={class:"Description"},b={class:"foot"},_=["onClick"],w=["onClick"],v={class:"dialog-footer"};function y(e,o,t,s,c,u){const y=(0,l.up)("el-image"),W=(0,l.up)("el-button"),U=(0,l.up)("el-upload"),D=(0,l.up)("el-form-item"),I=(0,l.up)("el-input"),A=(0,l.up)("el-form"),C=(0,l.up)("el-dialog");return(0,l.wg)(),(0,l.iD)("div",i,[n,(0,l._)("div",d,[(0,l._)("div",r,[(0,l._)("div",{class:"add",onClick:o[0]||(o[0]=(...e)=>u.handleAdd&&u.handleAdd(...e))},m)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.bookList,(o=>((0,l.wg)(),(0,l.iD)("div",{class:"book_list",key:o.id},[(0,l._)("div",p,[(0,l.Wm)(y,{src:"src/assets/image/20.jpg"},{default:(0,l.w5)((()=>[(0,l.Uk)(' alt="书籍封面">')])),_:1})]),(0,l._)("div",f,[(0,l.Uk)((0,a.zw)(o.name)+" ",1),(0,l._)("span",g,(0,a.zw)(o.type),1)]),(0,l._)("div",h,(0,a.zw)(o.author),1),(0,l._)("div",k,(0,a.zw)(o.description),1),(0,l._)("div",b,[(0,l._)("span",{style:{float:"right"},onClick:t=>e.delAddress(o.id)},"删除",8,_),(0,l._)("span",{style:{float:"right","margin-right":"10px"},onClick:e=>u.handleMod(o.id)},"修改",8,w)])])))),128))]),(0,l.Wm)(C,{title:"添加新的书籍",modelValue:c.dialogVisible,"onUpdate:modelValue":o[4]||(o[4]=e=>c.dialogVisible=e),width:"50%",center:""},{footer:(0,l.w5)((()=>[(0,l._)("span",v,[(0,l.Wm)(W,{onClick:o[2]||(o[2]=e=>c.dialogVisible=!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("取 消")])),_:1}),(0,l.Wm)(W,{type:"primary",onClick:o[3]||(o[3]=e=>u.onSubmit("form"))},{default:(0,l.w5)((()=>[(0,l.Uk)("确 定")])),_:1})])])),default:(0,l.w5)((()=>[(0,l.Wm)(A,{ref:"form",model:c.book},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(U,{action:"{{this.book.image}}","on-success":u.handleUploadSuccess,"before-upload":u.beforeUpload,accept:"image/*","show-file-list":!1},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Uk)("选择图片")])),_:1})])),_:1},8,["on-success","before-upload"])])),_:1}),(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(I,{placeholder:"书名",modelValue:c.book.name,"onUpdate:modelValue":o[1]||(o[1]=e=>c.book.name=e)},null,8,["modelValue"])])),_:1}),(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(I,{placeholder:"类别"})])),_:1}),(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(I,{type:"textarea",placeholder:"简介"})])),_:1}),(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(I,{placeholder:"价格"})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}var W=t(9896),U={name:"AddressPage",data(){return{dialogVisible:!1,isEdit:!1,bookList:[{id:1,name:"黄哥的恋爱节奏",author:"黄文敬",isbn:"",type:"文学",description:"讲述了黄哥的恋爱心路历程，惊心动魄，感人肺腑",status:"",image:"",campus:"",price:"",newProduct:"",recommend:"",sellerID:""},{id:2,name:"算出来的秘密爱情",author:"胡丹婷",isbn:"",type:"小说",description:"",status:"",image:"",campus:"",price:"",newProduct:"",recommend:"",sellerID:""}],book:{id:null,name:"",author:"",isbn:"",type:"",description:"",status:"",image:"",campus:"",price:"",newProduct:"",recommend:"",sellerID:""}}},methods:{handleUploadSuccess(e,o){console.log("上传成功",e);const t=o.name,l=o.size;console.log("文件名:",t),console.log("文件大小:",l);const a=e.imageUrl,s=e.name,i=e.size;console.log("图片地址:",a),console.log("文件名:",s),console.log("文件大小:",i)},beforeUpload(e){return this.convertToDataURI(e),!1},convertToDataURI(e){const o=new FileReader;o.onload=e=>{const o=e.target.result;this.uploadImage(o)},o.readAsDataURL(e)},uploadImage(e){console.log("数据流",e);const o=new FormData;o.append("image",e),(0,W.Ix)(o).then((e=>{console.log("上传成功",e.data.img)})).catch((e=>{console.error("上传失败",e)}))},handleAdd(){this.dialogVisible=!0,this.isEdit=!1},handleMod(){},onSubmit(e){this.isEdit?this.modifyAddress():this.addAddress(),this.$refs[e].validate((e=>{e?this.isEdit?this.modifyAddress():this.addAddress():this.$message.error("地址信息不符合要求，请重试")}))}}},D=t(89);const I=(0,D.Z)(U,[["render",y],["__scopeId","data-v-62421e2f"]]);var A=I}}]);
//# sourceMappingURL=197.ff152692.js.map