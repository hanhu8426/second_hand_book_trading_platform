"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[804],{170:function(e,t,s){s.d(t,{DO:function(){return o},RO:function(){return l},hP:function(){return n},qp:function(){return i}});var a=s(6779);const d="http://localhost:8080",l=e=>(0,a.Z)(d+"/addUserAddress",{name:e.name,phone:e.phone,address:e.addr,area:e.area},"POST"),o=e=>(0,a.Z)(d+"/modifyUserAddress",{addId:e.addId,name:e.name,phone:e.phone,address:e.addr,area:e.area},"POST"),i=e=>(0,a.Z)(d+"/delUserAddress",{addId:e}),n=()=>(0,a.Z)(d+"/getUserAddress",{})},3804:function(e,t,s){s.r(t),s.d(t,{default:function(){return X}});var a=s(3396),d=s(7139);const l=e=>((0,a.dD)("data-v-ef7302c0"),e=e(),(0,a.Cn)(),e),o={style:{"background-color":"#f7f7f6",width:"100%","min-width":"1240px"}},i={class:"content"},n=l((()=>(0,a._)("div",{class:"title"},[(0,a._)("h3",null,"收货地址")],-1))),r={class:"list_box"},c=["onClick"],u={class:"name"},h={style:{float:"right","font-size":"14px",color:"#757575"}},m={class:"tel"},p={class:"detail"},_=l((()=>(0,a._)("div",{class:"title"},[(0,a._)("h3",null,"商品清单")],-1))),f={class:"list_box"},v={class:"bookInfo"},g={class:"book_item"},b={class:"book_detail"},w={class:"book_num"},k={class:"book_money"},x={class:"height_text"},y=(0,a.uE)('<div class="title" data-v-ef7302c0><h3 style="float:left;width:100px;" data-v-ef7302c0>配送方式</h3><span class="height_text" style="margin-left:60px;" data-v-ef7302c0>包邮</span></div><div class="title" data-v-ef7302c0><h3 style="float:left;width:100px;" data-v-ef7302c0>发票</h3><span class="height_text" style="margin-left:60px;" data-v-ef7302c0>电子普通发票个人商品明细</span></div>',2),W={class:"list_box"},U={class:"order_detail"},V={class:"bill_item"},C=l((()=>(0,a._)("div",{class:"bill_title"},"商品总价:",-1))),O={class:"bill_money height_text"},z={class:"bill_item"},I=l((()=>(0,a._)("div",{class:"bill_title"},"应付总额:",-1))),Z={class:"bill_money height_text",style:{"font-size":"22px"}},$={class:"list_box"},D={class:"order_action"},L={class:"address_box"},A=l((()=>(0,a._)("span",{class:"height_text"},"修改",-1))),N={class:"action"};function S(e,t,s,l,S,P){const H=(0,a.up)("Nav"),R=(0,a.up)("HeadNav"),T=(0,a.up)("el-image"),E=(0,a.up)("Footer"),q=(0,a.up)("el-input"),B=(0,a.up)("el-form-item"),F=(0,a.up)("el-form"),K=(0,a.up)("el-button"),Y=(0,a.up)("ChildComponent"),j=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(H),(0,a.Wm)(R),(0,a._)("div",i,[n,(0,a._)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(S.addressList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,d.C_)(["address_list",{selected_address:e.select}]),onClick:e=>P.selectOrderAddress(t),key:e.id},[(0,a._)("div",u,[(0,a.Uk)((0,d.zw)(e.name)+" ",1),(0,a._)("span",h,(0,d.zw)(e.label),1)]),(0,a._)("div",m,(0,d.zw)(e.phone),1),(0,a._)("div",p,(0,d.zw)(e.addr),1)],10,c)))),128))]),_,(0,a._)("div",f,[(0,a._)("div",v,[(0,a._)("div",g,[(0,a.Wm)(T,{class:"bookImg",src:S.book.image,fit:"fill"},null,8,["src"]),(0,a._)("div",b,[(0,a._)("p",null,(0,d.zw)(S.book.name)+" "+(0,d.zw)(S.book.author),1)])]),(0,a._)("div",w,[(0,a._)("p",null,(0,d.zw)(S.book.price)+" x 1",1)]),(0,a._)("div",k,[(0,a._)("p",x,(0,d.zw)(S.book.price)+"元",1)])])]),y,(0,a._)("div",W,[(0,a._)("div",U,[(0,a._)("div",V,[C,(0,a._)("div",O,(0,d.zw)(S.book.price)+"元",1)]),(0,a._)("div",z,[I,(0,a._)("div",Z,(0,d.zw)(S.book.price)+"元",1)])])]),(0,a._)("div",$,[(0,a._)("div",D,[(0,a._)("div",L,[(0,a._)("p",null,(0,d.zw)(S.address.name)+" "+(0,d.zw)(S.address.phone),1),(0,a._)("p",null,[(0,a.Uk)((0,d.zw)(S.address.addr),1),A])]),(0,a._)("div",N,[(0,a._)("button",{class:"plainBtn",style:{"background-color":"#ff6600",color:"white"},onClick:t[0]||(t[0]=(...e)=>P.submitOrder&&P.submitOrder(...e))},"立刻下单")])])])]),(0,a.Wm)(E),(0,a.Wm)(j,{title:"添加收货地址",visible:S.dialogVisible,"onUpdate:visible":t[7]||(t[7]=e=>S.dialogVisible=e),width:"30%",center:""},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{ref:"form",model:S.address},{default:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q,{placeholder:"姓名",modelValue:S.address.name,"onUpdate:modelValue":t[1]||(t[1]=e=>S.address.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q,{placeholder:"手机号",modelValue:S.address.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>S.address.phone=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q,{type:"textarea",placeholder:"详细地址",modelValue:S.address.addr,"onUpdate:modelValue":t[3]||(t[3]=e=>S.address.addr=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(q,{placeholder:"地址标签",modelValue:S.address.label,"onUpdate:modelValue":t[4]||(t[4]=e=>S.address.label=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a.Wm)(Y,null,{footer:(0,a.w5)((()=>[(0,a.Wm)(K,{onClick:t[5]||(t[5]=e=>S.dialogVisible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取 消")])),_:1}),(0,a.Wm)(K,{type:"primary",onClick:t[6]||(t[6]=e=>P.onSubmit("form"))},{default:(0,a.w5)((()=>[(0,a.Uk)("确 定")])),_:1})])),_:1})])),_:1},8,["visible"])])}s(7658);var P=s(3999),H=s(2310),R=s(4337),T=s(170),E=s(6779);const q="http://localhost:8080",B=e=>(0,E.Z)(q+"/addOrder",{account:e.account,expense:e.expense,addressList:e.addressList,address:e.address},"POST"),F={class:"dialog-footer"};function K(e,t,s,d,l,o){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",F,[(0,a.WI)(e.$slots,"footer")])])}var Y={},j=s(89);const G=(0,j.Z)(Y,[["render",K]]);var J=G,M={name:"BuyPage",components:{ChildComponent:J,Nav:P.Z,HeadNav:H.Z,Footer:R.Z},data(){return{account:"",book:null,selectId:null,dialogVisible:!1,addressList:[{id:1,name:"小胖",phone:"18988798892",addr:"江西抚州市临川区西大街街道东华理工大学长江学院本部(330006)",area:1,off:!1,select:!1},{id:2,name:"小胖",phone:"18988798892",addr:"江西抚州市临川区西大街街道东华理工大学长江学院本部(330006)",area:1,off:!1,select:!1}],address:{id:null,name:"",phone:"",addr:"",area:null}}},created(){this.account=this.$store.getters.getUser.account,this.address.account=this.$store.getters.getUser.account,this.book=this.$route.query.book,console.log("接收到参数book："+this.book)},methods:{handleAdd(){this.dialogVisible=!0,this.isEdit=!1},onSubmit(){this.isEdit?this.modifyAddress():this.addAddress()},addAddress(){(0,T.RO)(this.address).then((e=>{console.log(e),1===e.data.code?(this.$message({message:e.data.msg,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.data.msg,type:"warning"})})).catch((e=>{console.log(e)}))},getAddressList(){(0,T.hP)().then((e=>{console.log(e),1===e.data.code?(this.addressList=e.data.data,this.addressList.length>0&&(console.log(this.addressList[0]),this.address=this.addressList[0],this.selectId=this.addressList[0].id)):this.$message({message:e.data.msg,type:"warning"})})).catch((e=>{console.log(e)}))},selectOrderAddress(e){this.selectId=this.addressList[e].id,this.address=this.addressList[e]},submitOrder(){this.account=this.$store.getters.getUser.account,console.log("====this.OrderInitDto.account===="+this.account+"=====");const e=new Date;B(this.address,this.bookId,e).then((e=>{1===e.data.code?(this.$message({type:"success",message:e.data.msg,duration:1e3}),setTimeout((()=>{this.$router.push({path:"/user/userOrder"})}),1e3)):2===e.data.code&&(this.$message({message:"余额不足，请充值！！！",type:"warning"}),this.$router.push({path:"/userInfo"}))})).catch((()=>{this.$message({message:"下单失败了",type:"warning"})}))}}};const Q=(0,j.Z)(M,[["render",S],["__scopeId","data-v-ef7302c0"]]);var X=Q},4337:function(e,t,s){s.d(t,{Z:function(){return h}});var a=s(3396);const d=e=>((0,a.dD)("data-v-150b6664"),e=e(),(0,a.Cn)(),e),l={class:"footer"},o=d((()=>(0,a._)("div",{class:"content"},[(0,a._)("p",null,"© 2023 想好了没组 软件学院 参考南昌大学黄龙同学作品")],-1))),i=[o];function n(e,t){return(0,a.wg)(),(0,a.iD)("div",l,i)}var r=s(89);const c={},u=(0,r.Z)(c,[["render",n],["__scopeId","data-v-150b6664"]]);var h=u},3999:function(e,t,s){s.d(t,{Z:function(){return u}});var a=s(3396);const d={class:"navClass"},l={class:"content"},o={class:"nav_content"};function i(e,t,s,i,n,r){const c=(0,a.up)("el-menu-item"),u=(0,a.up)("router-link"),h=(0,a.up)("el-submenu"),m=(0,a.up)("el-menu");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",l,[(0,a._)("div",o,[(0,a.Wm)(m,{"default-active":e.$route.path,class:"el-menu-demo",mode:"horizontal",onSelect:r.handleSelect,"background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b",router:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{index:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("首页")])),_:1}),(0,a.Wm)(h,{index:"/"},{title:(0,a.w5)((()=>[(0,a.Uk)("登陆|注册")])),default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{to:"/Login"},{default:(0,a.w5)((()=>[(0,a.Uk)("登录")])),_:1})])),_:1}),(0,a.Wm)(c,{index:"/RegisterPage"},{default:(0,a.w5)((()=>[(0,a.Uk)("注册")])),_:1}),(0,a.Wm)(c,{index:"/user/bookStall"},{default:(0,a.w5)((()=>[(0,a.Uk)("发布")])),_:1}),(0,a.Wm)(c,{index:"/Upload"},{default:(0,a.w5)((()=>[(0,a.Uk)("测试")])),_:1})])),_:1}),(0,a.Wm)(c,{index:"/user/mesNotice"},{default:(0,a.w5)((()=>[(0,a.Uk)("消息")])),_:1}),(0,a.Wm)(c,{index:"/user/userOrder"},{default:(0,a.w5)((()=>[(0,a.Uk)("我的订单")])),_:1}),(0,a.Wm)(c,{index:"/user"},{default:(0,a.w5)((()=>[(0,a.Uk)("个人中心")])),_:1})])),_:1},8,["default-active","onSelect"])])])])}var n={name:"NavGation",data(){return{activeIndex:"/"}},methods:{handleSelect(e,t){console.log(e,t)}}},r=s(89);const c=(0,r.Z)(n,[["render",i],["__scopeId","data-v-20602ede"]]);var u=c},2310:function(e,t,s){s.d(t,{Z:function(){return p}});var a=s(3396),d=s(7139);const l=e=>((0,a.dD)("data-v-32d86536"),e=e(),(0,a.Cn)(),e),o={class:"headNav"},i={class:"content"},n=l((()=>(0,a._)("div",{style:{float:"left"}},[(0,a._)("div",{style:{width:"232px",height:"40px","vertical-align":"middle","font-family":"宋体","font-size":"38px","font-style":"italic"}}," 东大二手书网 ")],-1))),r={style:{float:"right"}};function c(e,t,s,l,c,u){const h=(0,a.up)("el-option"),m=(0,a.up)("el-select"),p=(0,a.up)("el-input"),_=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",i,[n,(0,a._)("div",r,[(0,a.Wm)(m,{modelValue:c.select,"onUpdate:modelValue":t[0]||(t[0]=e=>c.select=e),placeholder:"请选择",class:"search-type",onChange:u.handleOptionChange},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.type_list,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e.value,value:e.typeName},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.typeName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,a.Wm)(p,{modelValue:c.input,"onUpdate:modelValue":t[1]||(t[1]=e=>c.input=e),placeholder:"书名、作者",class:"input-with-select",style:{width:"400px",height:"40px"}},null,8,["modelValue"]),(0,a.Wm)(_,{icon:"el-icon-search",class:"search-button",onClick:u.search},{default:(0,a.w5)((()=>[(0,a.Uk)("搜索")])),_:1},8,["onClick"])])])])}s(7658);var u={name:"HeadNav",data(){return{rel:"",input:"",select:"",type_list:[{typeName:"书名",value:"0"},{typeName:"作者",value:"1"}],imgS:s(3352)}},computed:{},methods:{handleOptionChange(e){"option1"===e?this.handleOption1():"option2"===e&&this.handleOption2()},handleOption1(){this.select=0},handleOption2(){this.select=1},search(){this.$router.push({name:"Search",params:{selectResult:this.select,inputContent:this.input}})}}},h=s(89);const m=(0,h.Z)(u,[["render",c],["__scopeId","data-v-32d86536"]]);var p=m},3352:function(e,t,s){e.exports=s.p+"img/logo-250.fa9ad888.png"}}]);
//# sourceMappingURL=804.3f7d6170.js.map