"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[938],{2900:function(e,t,o){o.d(t,{Mv:function(){return c},RO:function(){return d},dR:function(){return u},yq:function(){return l}});var r=o(4161),a=o(6789);function n(e,t={},o="GET"){return new Promise((function(a,n){let s;if("GET"===o){let o="";Object.keys(t).forEach((e=>{o+=e+"="+t[e]+"&"})),""!==o&&(o=o.substring(0,o.lastIndexOf("&")),e=e+"?"+o),s=r.Z.get(e)}else s=r.Z.post(e,t);s.then((function(e){a(e)})).catch((function(e){n(e)}))}))}const s="http://localhost:8080",l=({account:e,password:t})=>n("http://localhost:8080/Login",{account:e,password:t},"POST"),u=({account:e})=>(0,a.Z)(s+"/user/accountVerify",{account:e}),c=(e,t)=>(0,a.Z)(s+"/user/register",{account:e,password:t}),d=(e,t,o)=>(0,a.Z)(s+"/modifyUserPwd",{account:e,oldPassword:t,newPassword:o})},4337:function(e,t,o){o.d(t,{Z:function(){return m}});var r=o(3396);const a=e=>((0,r.dD)("data-v-150b6664"),e=e(),(0,r.Cn)(),e),n={class:"footer"},s=a((()=>(0,r._)("div",{class:"content"},[(0,r._)("p",null,"© 2023 想好了没组 软件学院 参考南昌大学黄龙同学作品")],-1))),l=[s];function u(e,t){return(0,r.wg)(),(0,r.iD)("div",n,l)}var c=o(89);const d={},i=(0,c.Z)(d,[["render",u],["__scopeId","data-v-150b6664"]]);var m=i},7958:function(e,t,o){o.d(t,{Z:function(){return i}});var r=o(3396);const a={class:"navClass"},n={class:"content"},s={class:"nav_content"};function l(e,t,o,l,u,c){const d=(0,r.up)("el-menu-item"),i=(0,r.up)("router-link"),m=(0,r.up)("el-submenu"),f=(0,r.up)("el-menu");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r._)("div",n,[(0,r._)("div",s,[(0,r.Wm)(f,{"default-active":e.$route.path,class:"el-menu-demo",mode:"horizontal",onSelect:c.handleSelect,"background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b",router:""},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{index:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("首页")])),_:1}),(0,r.Wm)(m,{index:"/"},{title:(0,r.w5)((()=>[(0,r.Uk)("登陆|注册")])),default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{to:"Login"},{default:(0,r.w5)((()=>[(0,r.Uk)("登录")])),_:1})])),_:1}),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{to:"Register"},{default:(0,r.w5)((()=>[(0,r.Uk)("注册")])),_:1})])),_:1})])),_:1}),(0,r.Wm)(d,{index:"/user/userInfo"},{default:(0,r.w5)((()=>[(0,r.Uk)("消息")])),_:1}),(0,r.Wm)(d,{index:"/user/userOrder"},{default:(0,r.w5)((()=>[(0,r.Uk)("我的订单")])),_:1}),(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{to:"User",style:{color:"white"}},{default:(0,r.w5)((()=>[(0,r.Uk)("个人中心")])),_:1})])),_:1})])),_:1},8,["default-active","onSelect"])])])])}var u={name:"NavGation",data(){return{activeIndex:"/"}},methods:{handleSelect(e,t){console.log(e,t)}}},c=o(89);const d=(0,c.Z)(u,[["render",l],["__scopeId","data-v-1dd59bcc"]]);var i=d},7938:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});var r=o(3396);const a=e=>((0,r.dD)("data-v-c1cf7dda"),e=e(),(0,r.Cn)(),e),n={class:"content"},s={class:"login_content"},l=a((()=>(0,r._)("h2",null,"登陆",-1))),u=a((()=>(0,r._)("span",{style:{float:"left"}},[(0,r.Uk)("没有账号？"),(0,r._)("a",{href:"#/Register"},"去注册")],-1))),c=a((()=>(0,r._)("span",{style:{float:"right"}},"忘记密码",-1)));function d(e,t,o,a,d,i){const m=(0,r.up)("Nav"),f=(0,r.up)("el-input"),p=(0,r.up)("el-form-item"),h=(0,r.up)("el-button"),g=(0,r.up)("el-form"),w=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(m),(0,r._)("div",n,[(0,r._)("div",s,[l,(0,r.Wm)(g,{model:d.ruleForm,"status-icon":"",rules:d.rules,ref:"ruleForm"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{prop:"account"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{type:"text",modelValue:d.ruleForm.account,"onUpdate:modelValue":t[0]||(t[0]=e=>d.ruleForm.account=e),autocomplete:"off",placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,{prop:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,{type:"password",modelValue:d.ruleForm.password,"onUpdate:modelValue":t[1]||(t[1]=e=>d.ruleForm.password=e),autocomplete:"off",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(h,{type:"primary",onClick:t[2]||(t[2]=e=>i.login("ruleForm")),style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Uk)("登陆")])),_:1})])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[u,c])),_:1})])),_:1},8,["model","rules"])])]),(0,r.Wm)(w)])}o(7658);var i=o(2900),m=o(7958),f=o(4337),p={name:"LoginPage",components:{Nav:m.Z,Footer:f.Z},data(){var e=(e,t,o)=>{if(!t)return o(new Error("账号不能为空"));setTimeout((()=>{t.length>20?o(new Error("账号不能大于20位")):o()}),1e3)},t=(e,t,o)=>{""===t?o(new Error("请输入密码")):o()};return{ruleForm:{account:"",password:""},rules:{account:[{validator:e,trigger:"blur"}],password:[{validator:t,trigger:"blur"}]}}},methods:{login(e){let t=this;this.$refs[e].validate((e=>{e?(console.log("=====开始登陆======="),(0,i.yq)({account:this.ruleForm.account,password:this.ruleForm.password}).then((e=>{console.log("登陆后的response："+e.data);let o=e.data.user;console.log("=====user:==="+o+"=========");const r=e.headers["authorization"];if(console.log("====jwt:=== "+r),200==e.data.code){console.log("登录成功"),console.log(e);const o=e.headers["authorization"];console.log("====jwt:=== "+o),t.$store.commit("SET_TOKEN",o),console.log('===localStorage.getItem("token")==='+localStorage.getItem("token")+"=="),t.$store.commit("SET_USERINFO",e.data.user),console.log("=====response.data.user====="+e.data.user.manage+"========"),e.data.user.manage?(this.$message({type:"success",message:"登录成功！",duration:1e3}),setTimeout((()=>{this.$router.push({path:"/admin/home"})}),1e3)):(this.$message({type:"success",message:"登录成功！",duration:1e3}),setTimeout((()=>{this.$router.push({path:"/user/userCenter"})}),1e3)),console.log("返回来的SET_USERINFO:"+e.data.userInfo),this.$router.push({path:"/devHome/appList"})}else this.$message({type:"waring",message:"登录失败"})})).catch((()=>{}))):this.$message.error("账号密码不符合要求，登陆失败")}))},resetForm(e){this.$refs[e].resetFields()}}},h=o(89);const g=(0,h.Z)(p,[["render",d],["__scopeId","data-v-c1cf7dda"]]);var w=g}}]);
//# sourceMappingURL=938.ce200d83.js.map