"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[197],{6789:function(e,o,l){l.d(o,{Z:function(){return a}});var t=l(8831);function a(e,o={},l="GET"){return new Promise((function(a,s){let i;if("GET"===l){let l="";Object.keys(o).forEach((e=>{l+=e+"="+o[e]+"&"})),""!==l&&(l=l.substring(0,l.lastIndexOf("&")),e=e+"?"+l),i=t.Z.get(e)}else i=t.Z.post(e,o);i.then((function(e){a(e.data)})).catch((function(e){s(e)}))}))}},9896:function(e,o,l){l.d(o,{Ix:function(){return s}});var t=l(6789);const a="http://localhost:8080",s=e=>(0,t.Z)(a+"/bookStall/uploadImg",{formData:e},"POST")},2197:function(e,o,l){l.r(o),l.d(o,{default:function(){return C}});var t=l(3396),a=l(7139);const s=e=>((0,t.dD)("data-v-62421e2f"),e=e(),(0,t.Cn)(),e),i={class:"content"},n=s((()=>(0,t._)("h1",null,"我的书摊",-1))),d={class:"box_info"},c={class:"book_list"},r=s((()=>(0,t._)("i",{class:"el-icon-edit"},null,-1))),u=s((()=>(0,t._)("p",{style:{"font-size":"14px"}},"添加新的书籍",-1))),m=[r,u],p={class:"bookCover"},f={class:"bookName"},h={style:{float:"right","font-size":"14px",color:"#757575"}},g={class:"author"},b={class:"Description"},_={class:"foot"},k=["onClick"],w=["onClick"],v={class:"dialog-footer"};function W(e,o,l,s,r,u){const W=(0,t.up)("el-image"),y=(0,t.up)("el-button"),U=(0,t.up)("el-upload"),D=(0,t.up)("el-form-item"),I=(0,t.up)("el-input"),C=(0,t.up)("el-form"),V=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",i,[n,(0,t._)("div",d,[(0,t._)("div",c,[(0,t._)("div",{class:"add",onClick:o[0]||(o[0]=(...e)=>u.handleAdd&&u.handleAdd(...e))},m)]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(r.bookList,(o=>((0,t.wg)(),(0,t.iD)("div",{class:"book_list",key:o.id},[(0,t._)("div",p,[(0,t.Wm)(W,{src:"src/assets/image/20.jpg"},{default:(0,t.w5)((()=>[(0,t.Uk)(' alt="书籍封面">')])),_:1})]),(0,t._)("div",f,[(0,t.Uk)((0,a.zw)(o.name)+" ",1),(0,t._)("span",h,(0,a.zw)(o.type),1)]),(0,t._)("div",g,(0,a.zw)(o.author),1),(0,t._)("div",b,(0,a.zw)(o.description),1),(0,t._)("div",_,[(0,t._)("span",{style:{float:"right"},onClick:l=>e.delAddress(o.id)},"删除",8,k),(0,t._)("span",{style:{float:"right","margin-right":"10px"},onClick:e=>u.handleMod(o.id)},"修改",8,w)])])))),128))]),(0,t.Wm)(V,{title:"添加新的书籍",modelValue:r.dialogVisible,"onUpdate:modelValue":o[4]||(o[4]=e=>r.dialogVisible=e),width:"50%",center:""},{footer:(0,t.w5)((()=>[(0,t._)("span",v,[(0,t.Wm)(y,{onClick:o[2]||(o[2]=e=>r.dialogVisible=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取 消")])),_:1}),(0,t.Wm)(y,{type:"primary",onClick:o[3]||(o[3]=e=>u.onSubmit("form"))},{default:(0,t.w5)((()=>[(0,t.Uk)("确 定")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(C,{ref:"form",model:r.book},{default:(0,t.w5)((()=>[(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(U,{action:"{{this.book.image}}","on-success":u.handleUploadSuccess,"before-upload":u.beforeUpload,accept:"image/*","show-file-list":!1},{default:(0,t.w5)((()=>[(0,t.Wm)(y,null,{default:(0,t.w5)((()=>[(0,t.Uk)("选择图片")])),_:1})])),_:1},8,["on-success","before-upload"])])),_:1}),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{placeholder:"书名",modelValue:r.book.name,"onUpdate:modelValue":o[1]||(o[1]=e=>r.book.name=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{placeholder:"类别"})])),_:1}),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{type:"textarea",placeholder:"简介"})])),_:1}),(0,t.Wm)(D,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{placeholder:"价格"})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}var y=l(9896),U={name:"AddressPage",data(){return{dialogVisible:!1,isEdit:!1,bookList:[{id:1,name:"黄哥的恋爱节奏",author:"黄文敬",isbn:"",type:"文学",description:"讲述了黄哥的恋爱心路历程，惊心动魄，感人肺腑",status:"",image:"",campus:"",price:"",newProduct:"",recommend:"",sellerID:""},{id:2,name:"算出来的秘密爱情",author:"胡丹婷",isbn:"",type:"小说",description:"",status:"",image:"",campus:"",price:"",newProduct:"",recommend:"",sellerID:""}],book:{id:null,name:"",author:"",isbn:"",type:"",description:"",status:"",image:"",campus:"",price:"",newProduct:"",recommend:"",sellerID:""}}},methods:{handleUploadSuccess(e,o){console.log("上传成功",e);const l=o.name,t=o.size;console.log("文件名:",l),console.log("文件大小:",t);const a=e.imageUrl,s=e.name,i=e.size;console.log("图片地址:",a),console.log("文件名:",s),console.log("文件大小:",i)},beforeUpload(e){return this.convertToDataURI(e),!1},convertToDataURI(e){const o=new FileReader;o.onload=e=>{const o=e.target.result;this.uploadImage(o)},o.readAsDataURL(e)},uploadImage(e){console.log("数据流",e);const o=new FormData;o.append("image",e),(0,y.Ix)(o).then((e=>{console.log("上传成功",e.data.img)})).catch((e=>{console.error("上传失败",e)}))},handleAdd(){this.dialogVisible=!0,this.isEdit=!1},handleMod(){},onSubmit(e){this.isEdit?this.modifyAddress():this.addAddress(),this.$refs[e].validate((e=>{e?this.isEdit?this.modifyAddress():this.addAddress():this.$message.error("地址信息不符合要求，请重试")}))}}},D=l(89);const I=(0,D.Z)(U,[["render",W],["__scopeId","data-v-62421e2f"]]);var C=I}}]);
//# sourceMappingURL=197.35518ac5.js.map