"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[997],{9896:function(e,t,o){o.d(t,{G3:function(){return l},Ms:function(){return n},eZ:function(){return i},fA:function(){return c}});var a=o(6779);const s="http://localhost:8080",n=e=>(0,a.Z)(`${s}/getBook/${e}`),l=e=>(0,a.Z)(s+"/getRecBookList",{sort:e}),i=(e,t,o)=>(0,a.Z)(s+"/getBookListBySort",{type:e,page:t,pageSize:o}),c=(e,t,o,n)=>(0,a.Z)(s+"/getBookListByName",{name:e,author:t,page:o,pageSize:n})},4337:function(e,t,o){o.d(t,{Z:function(){return h}});var a=o(3396);const s=e=>((0,a.dD)("data-v-150b6664"),e=e(),(0,a.Cn)(),e),n={class:"footer"},l=s((()=>(0,a._)("div",{class:"content"},[(0,a._)("p",null,"© 2023 想好了没组 软件学院 参考南昌大学黄龙同学作品")],-1))),i=[l];function c(e,t){return(0,a.wg)(),(0,a.iD)("div",n,i)}var r=o(89);const u={},d=(0,r.Z)(u,[["render",c],["__scopeId","data-v-150b6664"]]);var h=d},3999:function(e,t,o){o.d(t,{Z:function(){return d}});var a=o(3396);const s={class:"navClass"},n={class:"content"},l={class:"nav_content"};function i(e,t,o,i,c,r){const u=(0,a.up)("el-menu-item"),d=(0,a.up)("router-link"),h=(0,a.up)("el-submenu"),p=(0,a.up)("el-menu");return(0,a.wg)(),(0,a.iD)("div",s,[(0,a._)("div",n,[(0,a._)("div",l,[(0,a.Wm)(p,{"default-active":e.$route.path,class:"el-menu-demo",mode:"horizontal",onSelect:r.handleSelect,"background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b",router:""},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{index:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("首页")])),_:1}),(0,a.Wm)(h,{index:"/"},{title:(0,a.w5)((()=>[(0,a.Uk)("登陆|注册")])),default:(0,a.w5)((()=>[(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{to:"/Login"},{default:(0,a.w5)((()=>[(0,a.Uk)("登录")])),_:1})])),_:1}),(0,a.Wm)(u,{index:"/RegisterPage"},{default:(0,a.w5)((()=>[(0,a.Uk)("注册")])),_:1}),(0,a.Wm)(u,{index:"/user/bookStall"},{default:(0,a.w5)((()=>[(0,a.Uk)("发布")])),_:1}),(0,a.Wm)(u,{index:"/Upload"},{default:(0,a.w5)((()=>[(0,a.Uk)("测试")])),_:1})])),_:1}),(0,a.Wm)(u,{index:"/user/mesNotice"},{default:(0,a.w5)((()=>[(0,a.Uk)("消息")])),_:1}),(0,a.Wm)(u,{index:"/user/userOrder"},{default:(0,a.w5)((()=>[(0,a.Uk)("我的订单")])),_:1}),(0,a.Wm)(u,{index:"/user"},{default:(0,a.w5)((()=>[(0,a.Uk)("个人中心")])),_:1})])),_:1},8,["default-active","onSelect"])])])])}var c={name:"NavGation",data(){return{activeIndex:"/"}},methods:{handleSelect(e,t){console.log(e,t)}}},r=o(89);const u=(0,r.Z)(c,[["render",i],["__scopeId","data-v-20602ede"]]);var d=u},2310:function(e,t,o){o.d(t,{Z:function(){return g}});var a=o(3396),s=o(7139);const n=e=>((0,a.dD)("data-v-32d86536"),e=e(),(0,a.Cn)(),e),l={class:"headNav"},i={class:"content"},c=n((()=>(0,a._)("div",{style:{float:"left"}},[(0,a._)("div",{style:{width:"232px",height:"40px","vertical-align":"middle","font-family":"宋体","font-size":"38px","font-style":"italic"}}," 东大二手书网 ")],-1))),r={style:{float:"right"}};function u(e,t,o,n,u,d){const h=(0,a.up)("el-option"),p=(0,a.up)("el-select"),g=(0,a.up)("el-input"),m=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",i,[c,(0,a._)("div",r,[(0,a.Wm)(p,{modelValue:u.select,"onUpdate:modelValue":t[0]||(t[0]=e=>u.select=e),placeholder:"请选择",class:"search-type",onChange:d.handleOptionChange},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(u.type_list,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e.value,value:e.typeName},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.typeName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,a.Wm)(g,{modelValue:u.input,"onUpdate:modelValue":t[1]||(t[1]=e=>u.input=e),placeholder:"书名、作者",class:"input-with-select",style:{width:"400px",height:"40px"}},null,8,["modelValue"]),(0,a.Wm)(m,{icon:"el-icon-search",class:"search-button",onClick:d.search},{default:(0,a.w5)((()=>[(0,a.Uk)("搜索")])),_:1},8,["onClick"])])])])}o(7658);var d={name:"HeadNav",data(){return{rel:"",input:"",select:"",type_list:[{typeName:"书名",value:"0"},{typeName:"作者",value:"1"}],imgS:o(3352)}},computed:{},methods:{handleOptionChange(e){"option1"===e?this.handleOption1():"option2"===e&&this.handleOption2()},handleOption1(){this.select=0},handleOption2(){this.select=1},search(){this.$router.push({name:"Search",params:{selectResult:this.select,inputContent:this.input}})}}},h=o(89);const p=(0,h.Z)(d,[["render",u],["__scopeId","data-v-32d86536"]]);var g=p},5997:function(e,t,o){o.r(t),o.d(t,{default:function(){return P}});var a=o(3396),s=o(7139);const n=e=>((0,a.dD)("data-v-7f55456c"),e=e(),(0,a.Cn)(),e),l={class:"content"},i={class:"box_title"},c={class:"box"},r={class:"book_sort"},u={class:"tab"},d=n((()=>(0,a._)("div",{class:"tab_head"},"分类",-1))),h=["onClick"],p={style:{color:"black"}},g={class:"book_info"},m={class:"book_content_img"},k={class:"book_content_info"},_={class:"book_name"},v={class:"book_list_content"},f={class:"book_list_content"},y={key:0},w={key:1},b={key:2},C={class:"book_list_content"},S={key:0,class:"block",style:{float:"right",padding:"0 30px 10px"}},x={key:1,style:{width:"100%",height:"50px","line-height":"50px",padding:"0 20px"}},$=n((()=>(0,a._)("h3",null,"不好意思，本书库还没有相关图书......",-1))),z=[$],L=n((()=>(0,a._)("div",{style:{clear:"both"}},null,-1)));function W(e,t,o,n,$,W){const B=(0,a.up)("Nav"),I=(0,a.up)("HeadNav"),U=(0,a.up)("router-link"),D=(0,a.up)("el-image"),q=(0,a.up)("el-button"),N=(0,a.up)("el-pagination"),Z=(0,a.up)("Footer");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a.Wm)(B),(0,a.Wm)(I),(0,a._)("div",i,[(0,a._)("p",null,(0,s.zw)(this.total)+" 条结果 ",1)]),(0,a._)("div",c,[(0,a._)("div",r,[(0,a._)("div",u,[d,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)($.sortList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:(0,s.C_)(["tab_list",{selected:e.isSelected&&$.selectedCategory===t}])},[(0,a._)("div",{onClick:o=>W.selectCategory(e,t)},[(0,a.Uk)("> "),(0,a.Wm)(U,{to:{path:"/search",query:{kind:t+1}},class:"custom-link"},{default:(0,a.w5)((()=>[(0,a._)("span",p,(0,s.zw)(e.name),1)])),_:2},1032,["to"])],8,h)],2)))),128))])]),(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.bookList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"book_content",key:e.bookId},[(0,a.Wm)(U,{to:"/BookInfo/"+e.bookId},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(D,{style:{width:"82%",height:"150px",margin:"5px 9%"},src:e.image,fit:"fill"},null,8,["src"])])])),_:2},1032,["to"]),(0,a._)("div",k,[(0,a._)("div",_,(0,s.zw)(e.name),1),(0,a._)("div",v,"作者: "+(0,s.zw)(e.author),1),(0,a._)("div",f,[(0,a.Uk)("校区: "),1===e.campus?((0,a.wg)(),(0,a.iD)("span",y,"九龙湖校区")):(0,a.kq)("",!0),2===e.campus?((0,a.wg)(),(0,a.iD)("span",w,"四牌楼校区")):(0,a.kq)("",!0),3===e.campus?((0,a.wg)(),(0,a.iD)("span",b,"丁家桥校区")):(0,a.kq)("",!0)]),(0,a._)("div",C,"售价: "+(0,s.zw)(e.price),1),(0,a._)("div",null,[(0,a.Wm)(q,{class:"plainBtn",plain:"",onClick:t=>W.goBuyPage(e.bookId)},{default:(0,a.w5)((()=>[(0,a.Uk)("立即购买")])),_:2},1032,["onClick"])])])])))),128)),$.total>0?((0,a.wg)(),(0,a.iD)("div",S,[(0,a.Wm)(N,{onSizeChange:W.handleSizeChange,onCurrentChange:W.handleCurrentChange,"current-page":$.currentPage,"page-sizes":[5,10,20,50],"page-size":$.page_size,background:"",layout:"total, sizes, prev, pager, next, jumper",total:$.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])):((0,a.wg)(),(0,a.iD)("div",x,z))]),L]),(0,a.Wm)(Z)])}o(7658);var B=o(3999),I=o(2310),U=o(4337),D=o(9896),q={name:"SearchBook",components:{Nav:B.Z,HeadNav:I.Z,Footer:U.Z},data(){return{currentPage:1,page_size:10,total:100,name:null,author:null,sortName:"分类名称",selectedCategory:null,sortList:[{name:"历史 | 政治",isSelected:!1},{name:"文学 | 艺术",isSelected:!1},{name:"科学 | 艺术",isSelected:!1},{name:"商业 | 经济",isSelected:!1},{name:"心理 | 自助",isSelected:!1},{name:"旅游 | 地理",isSelected:!1},{name:"宗教 | 哲学",isSelected:!1}],bookList:[],type:void 0,recInput:null,recSelect:null}},methods:{goBuyPage(e){const t=encodeURIComponent(parseInt(e,10));this.$router.push({path:"/buyPage/"+t})},selectCategory(e,t){this.sortList.forEach((e=>{e.isSelected=!1})),e.isSelected=!0,this.$store.commit("setSelectedCategory",t)},async fetchBookList(){try{const e=await this.getBookList(this.type,this.currentPage,this.page_size);this.total=e.data.data.total,this.bookList=e.data.data.rows}catch(e){console.log(e)}},handleClick(e,t){console.log(e,t)},getBookList(e,t,o){return new Promise(((a,s)=>{void 0!==e?(0,D.eZ)(e,t,o).then((e=>{const t=e.data.code;1===t?(this.total=e.data.data.total,this.bookList=e.data.data.rows,a(e.data.data)):s(new Error("请求失败！")),console.log("准备打印response"),console.log(e),console.log("打印response中的bookList"),console.log(this.bookList)})).catch((e=>{s(e),console.log(e)})):(console.log("进入按照书名作者来查询,并发起请求："),console.log("开始向后端请求数据，并且name和author的值为："+this.name+"===="+this.author),(0,D.fA)(this.name,this.author,t,o).then((e=>{1===e.data.code?(this.total=e.data.data.total,this.bookList=e.data.data.rows,a(e.data.data)):s(new Error("请求失败！")),console.log(e)})).catch((e=>{console.log(e)})))}))},handleSizeChange(e){console.log(`每页 ${e} 条`),this.page_size=e,this.currentPage=1,this.fetchBookList()},handleCurrentChange(e){console.log(`当前页: ${e}`),this.currentPage=e,console.log(this.currentPage+":"+this.page_size),this.fetchBookList()}},created(){const e=this.$store.state.selectedCategory;null!==e&&(this.selectedCategory=e,this.sortList[e].isSelected=!0),this.type=this.$route.query.kind,this.sortName=this.$route.query.name,this.recSelect=this.$route.params.selectResult,this.recInput=this.$route.params.inputContent,"书名"===this.recSelect?(this.name=this.recInput,this.author=null):"作者"===this.recSelect&&(this.name=null,this.author=this.recInput),console.log("进入测试函数，准备打印数据"),console.log("type:"+this.type),console.log("接收到的type："+this.type),console.log("this.$route.query.name:"+this.$route.query.name),console.log("this.$route.query.kind:"+this.$route.query.kind),console.log("接收到的结果："+this.$route.params.inputContent),console.log("接收到的selectResult："+this.recSelect),console.log("name和author的值为："+this.name+"===="+this.author),this.fetchBookList()},watch:{$route(){this.type=this.$route.query.kind,this.sortName=this.$route.query.name,this.recSelect=this.$route.params.selectResult,this.recInput=this.$route.params.inputContent,"书名"===this.recSelect?(this.name=this.recInput,this.author=null):"作者"===this.recSelect&&(this.name=null,this.author=this.recInput),console.log("this.$route.query.name:"+this.$route.query.name),console.log("this.$route.query.kind:"+this.$route.query.kind),console.log("name和author的值为："+this.name+"===="+this.author),this.fetchBookList()}}},N=o(89);const Z=(0,N.Z)(q,[["render",W],["__scopeId","data-v-7f55456c"]]);var P=Z},3352:function(e,t,o){e.exports=o.p+"img/logo-250.fa9ad888.png"}}]);
//# sourceMappingURL=997.ed91fc88.js.map