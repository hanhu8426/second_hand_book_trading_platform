"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[799],{2900:function(e,t,o){o.d(t,{Mv:function(){return u},RO:function(){return d},Sr:function(){return f},sz:function(){return i},yq:function(){return s},z$:function(){return c}});var r=o(4161),n=o(6779);const a="http://localhost:8080";function l(e,t={},o="GET"){return new Promise((function(n,a){let l;if("GET"===o){let o="";Object.keys(t).forEach((e=>{o+=e+"="+t[e]+"&"})),""!==o&&(o=o.substring(0,o.lastIndexOf("&")),e=e+"?"+o),l=r.Z.get(e)}else l=r.Z.post(e,t);l.then((function(e){n(e)})).catch((function(e){a(e)}))}))}const s=({account:e,password:t})=>l("http://localhost:8080/Login",{account:e,password:t},"POST"),u=(e,t)=>(0,n.Z)(a+"/Register",{account:e,password:t}),c=()=>(0,n.Z)(a+"/getUserInfo",{}),d=(e,t)=>(0,n.Z)(a+"/user/PwdManage",{oldPassword:e,newPassword:t},"POST"),i=e=>(0,n.Z)(a+"/user/userInfoOne",{charge:e},"POST"),f=(e,t,o,r,l)=>(0,n.Z)(a+"/user/userInfo",{file:e,phone:t,area:o,gender:r,introduction:l},"POST")},4337:function(e,t,o){o.d(t,{Z:function(){return f}});var r=o(3396);const n=e=>((0,r.dD)("data-v-150b6664"),e=e(),(0,r.Cn)(),e),a={class:"footer"},l=n((()=>(0,r._)("div",{class:"content"},[(0,r._)("p",null,"© 2023 想好了没组 软件学院 参考南昌大学黄龙同学作品")],-1))),s=[l];function u(e,t){return(0,r.wg)(),(0,r.iD)("div",a,s)}var c=o(89);const d={},i=(0,c.Z)(d,[["render",u],["__scopeId","data-v-150b6664"]]);var f=i},3999:function(e,t,o){o.d(t,{Z:function(){return i}});var r=o(3396);const n={class:"navClass"},a={class:"content"},l={class:"nav_content"};function s(e,t,o,s,u,c){const d=(0,r.up)("el-menu-item"),i=(0,r.up)("router-link"),f=(0,r.up)("el-submenu"),m=(0,r.up)("el-menu");return(0,r.wg)(),(0,r.iD)("div",n,[(0,r._)("div",a,[(0,r._)("div",l,[(0,r.Wm)(m,{"default-active":e.$route.path,class:"el-menu-demo",mode:"horizontal",onSelect:c.handleSelect,"background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b",router:""},{default:(0,r.w5)((()=>[(0,r.Wm)(d,{index:"/"},{default:(0,r.w5)((()=>[(0,r.Uk)("首页")])),_:1}),(0,r.Wm)(f,{index:"/"},{title:(0,r.w5)((()=>[(0,r.Uk)("登陆|注册")])),default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{to:"/Login"},{default:(0,r.w5)((()=>[(0,r.Uk)("登录")])),_:1})])),_:1}),(0,r.Wm)(d,{index:"/RegisterPage"},{default:(0,r.w5)((()=>[(0,r.Uk)("注册")])),_:1}),(0,r.Wm)(d,{index:"/user/bookStall"},{default:(0,r.w5)((()=>[(0,r.Uk)("发布")])),_:1}),(0,r.Wm)(d,{index:"/Upload"},{default:(0,r.w5)((()=>[(0,r.Uk)("测试")])),_:1})])),_:1}),(0,r.Wm)(d,{index:"/user/mesNotice"},{default:(0,r.w5)((()=>[(0,r.Uk)("消息")])),_:1}),(0,r.Wm)(d,{index:"/user/userOrder"},{default:(0,r.w5)((()=>[(0,r.Uk)("我的订单")])),_:1}),(0,r.Wm)(d,{index:"/user"},{default:(0,r.w5)((()=>[(0,r.Uk)("个人中心")])),_:1})])),_:1},8,["default-active","onSelect"])])])])}var u={name:"NavGation",data(){return{activeIndex:"/"}},methods:{handleSelect(e,t){console.log(e,t)}}},c=o(89);const d=(0,c.Z)(u,[["render",s],["__scopeId","data-v-20602ede"]]);var i=d},9799:function(e,t,o){o.r(t),o.d(t,{default:function(){return h}});var r=o(3396);const n=e=>((0,r.dD)("data-v-ffbf8ada"),e=e(),(0,r.Cn)(),e),a={class:"content"},l={class:"login_content"},s=n((()=>(0,r._)("h2",null,"登陆",-1))),u=n((()=>(0,r._)("span",{style:{float:"left"}},[(0,r.Uk)("没有账号？"),(0,r._)("a",{href:"#/Register"},"去注册")],-1))),c=n((()=>(0,r._)("span",{style:{float:"right"}},"忘记密码",-1)));function d(e,t,o,n,d,i){const f=(0,r.up)("Nav"),m=(0,r.up)("el-input"),p=(0,r.up)("el-form-item"),g=(0,r.up)("el-button"),w=(0,r.up)("el-form"),h=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(f),(0,r._)("div",a,[(0,r._)("div",l,[s,(0,r.Wm)(w,{model:d.ruleForm,"status-icon":"",rules:d.rules,ref:"ruleForm"},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{prop:"account"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"text",modelValue:d.ruleForm.account,"onUpdate:modelValue":t[0]||(t[0]=e=>d.ruleForm.account=e),autocomplete:"off",placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,{prop:"password"},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"password",modelValue:d.ruleForm.password,"onUpdate:modelValue":t[1]||(t[1]=e=>d.ruleForm.password=e),autocomplete:"off",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[(0,r.Wm)(g,{type:"primary",onClick:t[2]||(t[2]=e=>i.login("ruleForm")),style:{width:"100%"}},{default:(0,r.w5)((()=>[(0,r.Uk)("登陆")])),_:1})])),_:1}),(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[u,c])),_:1})])),_:1},8,["model","rules"])])]),(0,r.Wm)(h)])}o(7658);var i=o(2900),f=o(3999),m=o(4337),p={name:"LoginPage",components:{Nav:f.Z,Footer:m.Z},data(){var e=(e,t,o)=>{if(!t)return o(new Error("账号不能为空"));setTimeout((()=>{t.length>20?o(new Error("账号不能大于20位")):o()}),1e3)},t=(e,t,o)=>{""===t?o(new Error("请输入密码")):o()};return{ruleForm:{account:"",password:""},rules:{account:[{validator:e,trigger:"blur"}],password:[{validator:t,trigger:"blur"}]}}},methods:{login(e){let t=this;this.$refs[e].validate((e=>{e?(console.log("=====开始登陆======="),console.log("这是最新的测试，但是这里还没发请求"),(0,i.yq)({account:this.ruleForm.account,password:this.ruleForm.password}).then((e=>{if(console.log("收到返回的response,接下来检测状态码"),console.log("再次修改"),1==e.data.code){let o=e.headers.authorization;console.log(e.headers),localStorage.setItem("token",o),t.$store.commit("SET_TOKEN",o),console.log("我存了令牌，开始打印");let r=localStorage.getItem("token");console.log(r);let n=e.data.data;console.log(n),t.$store.commit("SET_USERINFO",n),"success"==e.data.msg&&(this.$message({type:"success",message:"登录成功！",duration:10}),setTimeout((()=>{this.$router.push({path:"/user/userCenter"})}),10))}else console.log("状态码错误，登录失败"),this.$message({type:"waring",message:"登录失败"})})).catch((()=>{this.$message.error("登录失败")}))):this.$message.error("账号密码不符合要求，登陆失败")}))},resetForm(e){this.$refs[e].resetFields()}}},g=o(89);const w=(0,g.Z)(p,[["render",d],["__scopeId","data-v-ffbf8ada"]]);var h=w}}]);
//# sourceMappingURL=799.887bcbc2.js.map