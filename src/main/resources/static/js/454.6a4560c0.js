"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[454],{6789:function(t,e,o){o.d(e,{Z:function(){return s}});var n=o(8831);function s(t,e={},o="GET"){return new Promise((function(s,a){let i;if("GET"===o){let o="";Object.keys(e).forEach((t=>{o+=t+"="+e[t]+"&"})),""!==o&&(o=o.substring(0,o.lastIndexOf("&")),t=t+"?"+o),i=n.Z.get(t)}else i=n.Z.post(t,e);i.then((function(t){s(t)})).catch((function(t){a(t)}))}))}},9896:function(t,e,o){o.d(e,{G3:function(){return l},Ix:function(){return a},Ms:function(){return i},eZ:function(){return r},fA:function(){return c}});var n=o(6789);const s="http://localhost:8080",a=t=>(0,n.Z)(s+"/bookStall/uploadImg",{formData:t},"POST"),i=t=>(0,n.Z)(s+"/getBook",{id:t}),l=t=>(0,n.Z)(s+"/getRecBookList",{sort:t}),r=(t,e,o)=>(0,n.Z)(s+"/getBookListBySort",{type:t,page:e,pageSize:o}),c=(t,e,o)=>(0,n.Z)(s+"/getBookListByName",{input:t,page:e,pageSize:o})},8876:function(t,e,o){o.d(e,{Ge:function(){return a}});var n=o(6789);const s="http://localhost:8080/sort",a=()=>(0,n.Z)(s+"/getBookSortList")},4337:function(t,e,o){o.d(e,{Z:function(){return h}});var n=o(3396);const s=t=>((0,n.dD)("data-v-150b6664"),t=t(),(0,n.Cn)(),t),a={class:"footer"},i=s((()=>(0,n._)("div",{class:"content"},[(0,n._)("p",null,"© 2023 想好了没组 软件学院 参考南昌大学黄龙同学作品")],-1))),l=[i];function r(t,e){return(0,n.wg)(),(0,n.iD)("div",a,l)}var c=o(89);const u={},d=(0,c.Z)(u,[["render",r],["__scopeId","data-v-150b6664"]]);var h=d},8342:function(t,e,o){o.d(e,{Z:function(){return d}});var n=o(3396);const s={class:"navClass"},a={class:"content"},i={class:"nav_content"};function l(t,e,o,l,r,c){const u=(0,n.up)("el-menu-item"),d=(0,n.up)("el-submenu"),h=(0,n.up)("el-menu");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",a,[(0,n._)("div",i,[(0,n.Wm)(h,{"default-active":t.$route.path,class:"el-menu-demo",mode:"horizontal",onSelect:c.handleSelect,"background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b",router:""},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{index:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)("首页")])),_:1}),(0,n.Wm)(d,{index:"/"},{title:(0,n.w5)((()=>[(0,n.Uk)("登陆|注册")])),default:(0,n.w5)((()=>[(0,n.Wm)(u,{index:"/Login"},{default:(0,n.w5)((()=>[(0,n.Uk)("登录")])),_:1}),(0,n.Wm)(u,{index:"/Register"},{default:(0,n.w5)((()=>[(0,n.Uk)("注册")])),_:1}),(0,n.Wm)(u,{index:"/user/bookStall"},{default:(0,n.w5)((()=>[(0,n.Uk)("发布")])),_:1})])),_:1}),(0,n.Wm)(u,{index:"/user/mesNotice"},{default:(0,n.w5)((()=>[(0,n.Uk)("消息")])),_:1}),(0,n.Wm)(u,{index:"/user/userOrder"},{default:(0,n.w5)((()=>[(0,n.Uk)("我的订单")])),_:1}),(0,n.Wm)(u,{index:"/user"},{default:(0,n.w5)((()=>[(0,n.Uk)("个人中心")])),_:1})])),_:1},8,["default-active","onSelect"])])])])}var r={name:"NavGation",data(){return{activeIndex:"/"}},methods:{handleSelect(t,e){console.log(t,e)}}},c=o(89);const u=(0,c.Z)(r,[["render",l],["__scopeId","data-v-5a926be1"]]);var d=u},2310:function(t,e,o){o.d(e,{Z:function(){return g}});var n=o(3396),s=o(7139);const a=t=>((0,n.dD)("data-v-32d86536"),t=t(),(0,n.Cn)(),t),i={class:"headNav"},l={class:"content"},r=a((()=>(0,n._)("div",{style:{float:"left"}},[(0,n._)("div",{style:{width:"232px",height:"40px","vertical-align":"middle","font-family":"宋体","font-size":"38px","font-style":"italic"}}," 东大二手书网 ")],-1))),c={style:{float:"right"}};function u(t,e,o,a,u,d){const h=(0,n.up)("el-option"),p=(0,n.up)("el-select"),g=(0,n.up)("el-input"),m=(0,n.up)("el-button");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n._)("div",l,[r,(0,n._)("div",c,[(0,n.Wm)(p,{modelValue:u.select,"onUpdate:modelValue":e[0]||(e[0]=t=>u.select=t),placeholder:"请选择",class:"search-type",onChange:d.handleOptionChange},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(u.type_list,(t=>((0,n.wg)(),(0,n.j4)(h,{key:t.value,value:t.typeName},{default:(0,n.w5)((()=>[(0,n.Uk)((0,s.zw)(t.typeName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,n.Wm)(g,{modelValue:u.input,"onUpdate:modelValue":e[1]||(e[1]=t=>u.input=t),placeholder:"书名、作者",class:"input-with-select",style:{width:"400px",height:"40px"}},null,8,["modelValue"]),(0,n.Wm)(m,{icon:"el-icon-search",class:"search-button",onClick:d.search},{default:(0,n.w5)((()=>[(0,n.Uk)("搜索")])),_:1},8,["onClick"])])])])}o(7658);var d={name:"HeadNav",data(){return{rel:"",input:"",select:"",type_list:[{typeName:"书名",value:"0"},{typeName:"作者",value:"1"}],imgS:o(3352)}},computed:{},methods:{handleOptionChange(t){"option1"===t?this.handleOption1():"option2"===t&&this.handleOption2()},handleOption1(){this.select=0},handleOption2(){this.select=1},search(){this.$router.push({name:"Search",params:{selectResult:this.select,inputContent:this.input}})}}},h=o(89);const p=(0,h.Z)(d,[["render",u],["__scopeId","data-v-32d86536"]]);var g=p},7454:function(t,e,o){o.r(e),o.d(e,{default:function(){return D}});var n=o(3396),s=o(7139);const a=t=>((0,n.dD)("data-v-c1faed40"),t=t(),(0,n.Cn)(),t),i={class:"content"},l={class:"box_title"},r={class:"box"},c={class:"book_sort"},u={class:"tab"},d=a((()=>(0,n._)("div",{class:"tab_head"},"分类",-1))),h={style:{color:"black",width:"100%"}},p={class:"book_info"},g={class:"book_content_img"},m={class:"book_content_info"},_={class:"book_name"},f={class:"book_list_content"},v={class:"book_list_content"},k={class:"book_list_content"},y={key:0,class:"block",style:{float:"right",padding:"0 30px 10px"}},w={key:1,style:{width:"100%",height:"50px","line-height":"50px",padding:"0 20px"}},b=a((()=>(0,n._)("h3",null,"不好意思，此分类暂时还没有图书......",-1))),S=[b];function C(t,e,o,a,b,C){const x=(0,n.up)("Nav"),z=(0,n.up)("HeadNav"),L=(0,n.up)("router-link"),$=(0,n.up)("el-image"),Z=(0,n.up)("el-button"),W=(0,n.up)("el-pagination"),N=(0,n.up)("Footer");return(0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(x),(0,n.Wm)(z),(0,n._)("div",l,[(0,n._)("p",null,(0,s.zw)(this.total)+" 条结果 ",1)]),(0,n._)("div",r,[(0,n._)("div",c,[(0,n._)("div",u,[d,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(b.sortList,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"tab_list",key:t.upperSort.id},[(0,n.Wm)(L,{to:{path:"/search",query:{id:t.upperSort.id,name:t.upperSort.sortName}}},{default:(0,n.w5)((()=>[(0,n._)("div",h,(0,s.zw)(t.upperSort.sortName),1)])),_:2},1032,["to"])])))),128))])]),(0,n._)("div",p,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.bookList,(t=>((0,n.wg)(),(0,n.iD)("div",{class:"book_content",key:t.bookId},[(0,n.Wm)(L,{to:{path:"/BookInfo",query:{id:t.bookId}}},{default:(0,n.w5)((()=>[(0,n._)("div",g,[(0,n.Wm)($,{style:{width:"82%",height:"150px",margin:"5px 9%"},src:t.image,fit:"fill"},null,8,["src"])])])),_:2},1032,["to"]),(0,n._)("div",m,[(0,n._)("div",_,(0,s.zw)(t.name),1),(0,n._)("div",f,"作者: "+(0,s.zw)(t.author),1),(0,n._)("div",v,"校区: "+(0,s.zw)(t.campus),1),(0,n._)("div",k,"售价: "+(0,s.zw)(t.price),1),(0,n._)("div",null,[(0,n.Wm)(Z,{class:"plainBtn",plain:""},{default:(0,n.w5)((()=>[(0,n.Uk)("立即购买")])),_:1})])])])))),128)),b.total>0?((0,n.wg)(),(0,n.iD)("div",y,[(0,n.Wm)(W,{onSizeChange:C.handleSizeChange,onCurrentChange:C.handleCurrentChange,"current-page":b.currentPage,"page-sizes":[5,10,20,50],"page-size":b.page_size,background:"",layout:"total, sizes, prev, pager, next, jumper",total:b.total},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])):((0,n.wg)(),(0,n.iD)("div",w,S))])]),(0,n.Wm)(N)])}var x=o(8342),z=o(2310),L=o(4337),$=o(8876),Z=o(9896),W={name:"SearchBook",components:{Nav:x.Z,HeadNav:z.Z,Footer:L.Z},data(){return{currentPage:1,page_size:10,total:100,sortName:"分类名称",sortList:[{upperSort:{sortName:null},children:null}],bookList:[],type:null,recInput:null,recSelect:null}},methods:{handleClick(t,e){console.log(t,e)},getSortList(){(0,$.Ge)().then((t=>{this.sortList=t.sortResponseList}))},getBookList(t,e,o){return new Promise(((n,s)=>{void 0!==t?(0,Z.eZ)(t,e,o).then((t=>{const e=t.data.code;console.log("打印刚刚赋值的code，判定是否赋值成功"+e),1===e&&(console.log("接受到状态杩为1,为本地属性赋值。。。。。"),console.log("这里没存进来，但是收到了"),console.log(t.data["total"]),this.$store.commit("SET_TOTAL",t.data.total),console.log("这里存了在本地并打印"),console.log(localStorage.getItem("token")),console.log("打印本地的booklist："+this.bookList),n(t.data)),console.log("准备打印response"),console.log(t),console.log("打印response中的bookList"),console.log(this.bookList)})).catch((t=>{s(t),console.log(t)})):void 0!==this.selectResult&&void 0!==this.inputContent&&(0,Z.fA)({input:this.inputContent,page:e,pageSize:o}).then((t=>{1===t.data.code&&(this.total=t.data.total,this.bookList=t.data.rows),console.log(t)})).catch((t=>{console.log(t)}))}))},handleSizeChange(t){console.log(`每页 ${t} 条`),this.page_size=t,this.getBookList(this.type,1,this.page_size)},handleCurrentChange(t){console.log(`当前页: ${t}`),this.currentPage=t,console.log(this.currentPage+":"+this.page_size),this.getBookList(this.type,this.currentPage,this.page_size)}},created(){this.type=this.$route.query.kind,this.sortName=this.$route.query.name,this.recSelect=this.$route.params.selectResult,this.recInput=this.$route.params.inputContent,console.log("进入测试函数，准备打印数据"),console.log("type:"+this.type),console.log("this.$route.query.name:"+this.$route.query.name),console.log("this.$route.query.kind:"+this.$route.query.kind),console.log("接收到的结果："+this.$route.params.inputContent),this.getSortList(),this.getBookList(this.type,1,10).then((t=>{this.total=t.total})).catch((t=>{console.log(t)}))},watch:{$route(){this.type=this.$route.query.kind,this.sortName=this.$route.query.name,this.recSelect=this.$route.params.selectResult,this.recInput=this.$route.params.inputContent,console.log("this.$route.query.name:"+this.$route.query.name),console.log("this.$route.query.kind:"+this.$route.query.kind),this.getSortList(),this.getBookList(this.type,1,10)}}},N=o(89);const B=(0,N.Z)(W,[["render",C],["__scopeId","data-v-c1faed40"]]);var D=B},3352:function(t,e,o){t.exports=o.p+"img/logo-250.fa9ad888.png"}}]);
//# sourceMappingURL=454.6a4560c0.js.map