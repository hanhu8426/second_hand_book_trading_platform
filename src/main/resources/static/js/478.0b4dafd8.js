"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[478],{6789:function(e,s,d){d.d(s,{Z:function(){return l}});var a=d(8831);function l(e,s={},d="GET"){return new Promise((function(l,t){let o;if("GET"===d){let d="";Object.keys(s).forEach((e=>{d+=e+"="+s[e]+"&"})),""!==d&&(d=d.substring(0,d.lastIndexOf("&")),e=e+"?"+d),o=a.Z.get(e)}else o=a.Z.post(e,s);o.then((function(e){l(e.data)})).catch((function(e){t(e)}))}))}},4478:function(e,s,d){d.r(s),d.d(s,{default:function(){return Z}});var a=d(3396),l=d(7139);const t=e=>((0,a.dD)("data-v-ce30a624"),e=e(),(0,a.Cn)(),e),o={class:"content"},n=t((()=>(0,a._)("h1",null,"收货地址",-1))),i={class:"box_info"},r={class:"address_list"},c=t((()=>(0,a._)("i",{class:"el-icon-edit"},null,-1))),m=t((()=>(0,a._)("p",{style:{"font-size":"14px"}},"添加新地址",-1))),h=[c,m],u={class:"name"},g={style:{float:"right","font-size":"14px",color:"#757575"}},p={class:"tel"},f={class:"detail"},_={class:"foot"},w=["onClick"],b=["onClick"],V={class:"dialog-footer"};function y(e,s,d,t,c,m){const y=(0,a.up)("el-input"),k=(0,a.up)("el-form-item"),A=(0,a.up)("el-form"),v=(0,a.up)("el-button"),U=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",o,[n,(0,a._)("div",i,[(0,a._)("div",r,[(0,a._)("div",{class:"add",onClick:s[0]||(s[0]=(...e)=>m.handleAdd&&m.handleAdd(...e))},h)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.addressList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"address_list",key:e.id},[(0,a._)("div",u,[(0,a.Uk)((0,l.zw)(e.name)+" ",1),(0,a._)("span",g,(0,l.zw)(e.label),1)]),(0,a._)("div",p,(0,l.zw)(e.phone),1),(0,a._)("div",f,(0,l.zw)(e.addr),1),(0,a._)("div",_,[(0,a._)("span",{style:{float:"right"},onClick:s=>m.delAddress(e.id)},"删除",8,w),(0,a._)("span",{style:{float:"right","margin-right":"10px"},onClick:s=>m.handleMod(e)},"修改",8,b)])])))),128))]),(0,a.Wm)(U,{title:"添加收货地址",modelValue:c.dialogVisible,"onUpdate:modelValue":s[7]||(s[7]=e=>c.dialogVisible=e),width:"30%",center:""},{default:(0,a.w5)((()=>[(0,a.Wm)(A,{ref:"form",model:c.address},{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{placeholder:"姓名",modelValue:c.address.name,"onUpdate:modelValue":s[1]||(s[1]=e=>c.address.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{placeholder:"手机号",modelValue:c.address.phone,"onUpdate:modelValue":s[2]||(s[2]=e=>c.address.phone=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{type:"textarea",placeholder:"详细地址",modelValue:c.address.addr,"onUpdate:modelValue":s[3]||(s[3]=e=>c.address.addr=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{placeholder:"校区",modelValue:c.address.label,"onUpdate:modelValue":s[4]||(s[4]=e=>c.address.label=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a._)("span",V,[(0,a.Wm)(v,{onClick:s[5]||(s[5]=e=>c.dialogVisible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取 消")])),_:1}),(0,a.Wm)(v,{type:"primary",onClick:s[6]||(s[6]=e=>m.onSubmit("form"))},{default:(0,a.w5)((()=>[(0,a.Uk)("确 定")])),_:1})])])),_:1},8,["modelValue"])])}var k=d(6789);const A="http://localhost:8080",v=e=>(0,k.Z)(A+"/Address",{name:e.name,phone:e.phone,address:e.address,area:e.area},"POST"),U=e=>(0,k.Z)(A+"/modifyUserAddress",{id:e.id,name:e.name,phone:e.phone,address:e.address,area:e.area},"POST"),W=e=>(0,k.Z)(A+"/delUserAddress",{id:e}),C=e=>(0,k.Z)(A+"/getUserAddress",{account:e});var L={name:"AddressPage",data(){return{dialogVisible:!1,isEdit:!1,addressList:[{addId:1,name:"小胖",phone:"18988798892",addr:"东南大学梅园2东85",area:"1",off:!1},{addId:2,account:"黄小龙",name:"小胖",phone:"18988798892",addr:"江西抚州市临川区西大街街道东华理工大学长江学院本部(330006)",area:"1",off:!1}],address:{addId:null,name:"",phone:"",addr:"",area:"",off:!1}}},methods:{handleAdd(){this.dialogVisible=!0,this.isEdit=!1},handleMod(e){this.dialogVisible=!0,this.isEdit=!0,this.address.id=e.id,this.address.account=e.account,this.address.name=e.name,this.address.phone=e.phone,this.address.addr=e.addr,this.address.label=e.label},onSubmit(){this.isEdit?this.modifyAddress():this.addAddress()},getAddressList(){console.log("===获取的地址列表：==="+this.$store.getters.getUser.account+"====="),C(this.$store.getters.getUser.account).then((e=>{console.log(e),1==e.code?(this.addressList=e.addressList,console.log("===response.addressList.length==="+e.addressList.length)):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},addAddress(){v(this.address).then((e=>{console.log(e),1==e.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},modifyAddress(){U(this.address).then((e=>{console.log(e),1==e.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},delAddress(e){this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{W(e).then((e=>{console.log(e),1==e.code?(this.$message({message:e.message,type:"success"}),this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))})).catch((()=>{console.log("取消删除了")}))}}},$=d(89);const x=(0,$.Z)(L,[["render",y],["__scopeId","data-v-ce30a624"]]);var Z=x}}]);
//# sourceMappingURL=478.0b4dafd8.js.map