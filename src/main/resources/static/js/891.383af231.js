"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[891],{170:function(e,s,o){o.d(s,{DO:function(){return i},RO:function(){return d},hP:function(){return n},qp:function(){return l}});var t=o(6789);const a="http://localhost:8080",d=e=>(0,t.Z)(a+"/addUserAddress",{name:e.name,phone:e.phone,address:e.address,area:e.area},"POST"),i=e=>(0,t.Z)(a+"/modifyUserAddress",{id:e.id,name:e.name,phone:e.phone,address:e.address,area:e.area},"POST"),l=e=>(0,t.Z)(a+"/delUserAddress",{id:e}),n=e=>(0,t.Z)(a+"/getUserAddress",{account:e})},891:function(e,s,o){o.r(s),o.d(s,{default:function(){return L}});var t=o(3396),a=o(7139);const d=e=>((0,t.dD)("data-v-df51960e"),e=e(),(0,t.Cn)(),e),i={class:"content"},l=d((()=>(0,t._)("h1",null,"我的书摊",-1))),n={class:"box_info"},r={class:"book_list"},c=d((()=>(0,t._)("i",{class:"el-icon-edit"},null,-1))),m=d((()=>(0,t._)("p",{style:{"font-size":"14px"}},"添加新的书籍",-1))),u=[c,m],h={class:"bookCover"},g={class:"bookName"},p={style:{float:"right","font-size":"14px",color:"#757575"}},f={class:"author"},_={class:"Description"},b={class:"foot"},w=["onClick"],k=["onClick"],v=d((()=>(0,t._)("div",{class:"el-upload__tip"},"只能上传jpg/png文件，且不超过500kb",-1))),y={class:"dialog-footer"};function A(e,s,o,d,c,m){const A=(0,t.up)("el-image"),U=(0,t.up)("el-button"),W=(0,t.up)("el-upload"),$=(0,t.up)("el-input"),V=(0,t.up)("el-form-item"),L=(0,t.up)("el-form"),C=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",i,[l,(0,t._)("div",n,[(0,t._)("div",r,[(0,t._)("div",{class:"add",onClick:s[0]||(s[0]=(...e)=>m.handleAdd&&m.handleAdd(...e))},u)]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(c.bookList,(s=>((0,t.wg)(),(0,t.iD)("div",{class:"book_list",key:s.id},[(0,t._)("div",h,[(0,t.Wm)(A,{src:"src/assets/image/20.jpg"},{default:(0,t.w5)((()=>[(0,t.Uk)(' alt="书籍封面">')])),_:1})]),(0,t._)("div",g,[(0,t.Uk)((0,a.zw)(s.name)+" ",1),(0,t._)("span",p,(0,a.zw)(s.type),1)]),(0,t._)("div",f,(0,a.zw)(s.author),1),(0,t._)("div",_,(0,a.zw)(s.description),1),(0,t._)("div",b,[(0,t._)("span",{style:{float:"right"},onClick:o=>e.delAddress(s.id)},"删除",8,w),(0,t._)("span",{style:{float:"right","margin-right":"10px"},onClick:e=>m.handleMod(s.id)},"修改",8,k)])])))),128))]),(0,t.Wm)(C,{title:"添加新的书籍",modelValue:c.dialogVisible,"onUpdate:modelValue":s[4]||(s[4]=e=>c.dialogVisible=e),width:"50%",center:""},{footer:(0,t.w5)((()=>[(0,t._)("span",y,[(0,t.Wm)(U,{onClick:s[2]||(s[2]=e=>c.dialogVisible=!1)},{default:(0,t.w5)((()=>[(0,t.Uk)("取 消")])),_:1}),(0,t.Wm)(U,{type:"primary",onClick:s[3]||(s[3]=e=>m.onSubmit("form"))},{default:(0,t.w5)((()=>[(0,t.Uk)("确 定")])),_:1})])])),default:(0,t.w5)((()=>[(0,t.Wm)(L,{ref:"form",model:c.book},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{class:"upload-demo",action:"/upload","on-success":m.handleSuccess,"on-preview":m.handlePreview,"on-remove":m.handleRemove,"before-upload":m.beforeUpload,multiple:"",limit:3,"auto-upload":!1},{default:(0,t.w5)((()=>[(0,t.Wm)(U,{size:"small",type:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("上传封面")])),_:1}),v])),_:1},8,["on-success","on-preview","on-remove","before-upload"]),(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t.Wm)($,{placeholder:"书名",modelValue:c.book.name,"onUpdate:modelValue":s[1]||(s[1]=e=>c.book.name=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t.Wm)($,{placeholder:"类别"})])),_:1}),(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t.Wm)($,{type:"textarea",placeholder:"简介"})])),_:1}),(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t.Wm)($,{placeholder:"价格"})])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}var U=o(170),W={name:"AddressPage",data(){return{dialogVisible:!1,isEdit:!1,bookList:[{id:1,name:"黄哥的恋爱节奏",author:"黄文敬",isbn:"",type:"文学",description:"讲述了黄哥的恋爱心路历程，惊心动魄，感人肺腑",status:"",image:"",campus:"",price:"",newProduct:"",recommend:"",sellerID:""},{id:2,name:"算出来的秘密爱情",author:"胡丹婷",isbn:"",type:"小说",description:"",status:"",image:"",campus:"",price:"",newProduct:"",recommend:"",sellerID:""}],book:{id:null,name:"",author:"",isbn:"",type:"",description:"",status:"",image:"",campus:"",price:"",newProduct:"",recommend:"",sellerID:""}}},methods:{handleAdd(){this.dialogVisible=!0,this.isEdit=!1},handleMod(){},onSubmit(e){this.isEdit?this.modifyAddress():this.addAddress(),this.$refs[e].validate((e=>{e?this.isEdit?this.modifyAddress():this.addAddress():this.$message.error("地址信息不符合要求，请重试")}))},handleSuccess(e,s){this.book.image=URL.createObjectURL(s.raw)},handlePreview(){},handleRemove(){},beforeUpload(e){const s="image/jpeg"===e.type,o=e.size/1024/1024<2;return s||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),s&&o}},getAddressList(){console.log("===获取的地址列表：==="+this.$store.getters.getUser.account+"====="),(0,U.hP)(this.$store.getters.getUser.account).then((e=>{console.log(e),200==e.code?(this.addressList=e.addressList,console.log("===response.addressList.length==="+e.addressList.length)):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},addAddress(){(0,U.RO)(this.address).then((e=>{console.log(e),200==e.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},modifyAddress(){(0,U.DO)(this.address).then((e=>{console.log(e),200==e.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},delAddress(e){this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,U.qp)(e).then((e=>{console.log(e),200==e.code?(this.$message({message:e.message,type:"success"}),this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))})).catch((()=>{console.log("取消删除了")}))}},$=o(89);const V=(0,$.Z)(W,[["render",A],["__scopeId","data-v-df51960e"]]);var L=V}}]);
//# sourceMappingURL=891.383af231.js.map