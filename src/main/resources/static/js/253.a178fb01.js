"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[253],{6789:function(e,t,o){o.d(t,{Z:function(){return r}});var n=o(8831);function r(e,t={},o="GET"){return new Promise((function(r,s){let a;if("GET"===o){let o="";Object.keys(t).forEach((e=>{o+=e+"="+t[e]+"&"})),""!==o&&(o=o.substring(0,o.lastIndexOf("&")),e=e+"?"+o),a=n.Z.get(e)}else a=n.Z.post(e,t);a.then((function(e){r(e)})).catch((function(e){s(e)}))}))}},2900:function(e,t,o){o.d(t,{Mv:function(){return l},RO:function(){return d},Sr:function(){return f},sz:function(){return i},yq:function(){return u},z$:function(){return c}});var n=o(4161),r=o(6789);function s(e,t={},o="GET"){return new Promise((function(r,s){let a;if("GET"===o){let o="";Object.keys(t).forEach((e=>{o+=e+"="+t[e]+"&"})),""!==o&&(o=o.substring(0,o.lastIndexOf("&")),e=e+"?"+o),a=n.Z.get(e)}else a=n.Z.post(e,t);a.then((function(e){r(e)})).catch((function(e){s(e)}))}))}const a="http://localhost:8080",u=({account:e,password:t})=>s("http://localhost:8080/Login",{account:e,password:t},"POST"),l=(e,t)=>(0,r.Z)(a+"/Register",{account:e,password:t}),c=()=>(0,r.Z)(a+"/getUserInfo",{}),d=(e,t)=>(0,r.Z)(a+"/user/PwdManage",{oldPassword:e,newPassword:t},"POST"),i=e=>(0,r.Z)(a+"/user/userInfo/ModUserInfo_1",{charge:e}),f=(e,t,o,n,s)=>(0,r.Z)(a+"/user/userInfo",{avatar:e,phone:t,area:o,gender:n,introduction:s},"POST")},4337:function(e,t,o){o.d(t,{Z:function(){return f}});var n=o(3396);const r=e=>((0,n.dD)("data-v-150b6664"),e=e(),(0,n.Cn)(),e),s={class:"footer"},a=r((()=>(0,n._)("div",{class:"content"},[(0,n._)("p",null,"© 2023 想好了没组 软件学院 参考南昌大学黄龙同学作品")],-1))),u=[a];function l(e,t){return(0,n.wg)(),(0,n.iD)("div",s,u)}var c=o(89);const d={},i=(0,c.Z)(d,[["render",l],["__scopeId","data-v-150b6664"]]);var f=i},8342:function(e,t,o){o.d(t,{Z:function(){return i}});var n=o(3396);const r={class:"navClass"},s={class:"content"},a={class:"nav_content"};function u(e,t,o,u,l,c){const d=(0,n.up)("el-menu-item"),i=(0,n.up)("el-submenu"),f=(0,n.up)("el-menu");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n._)("div",s,[(0,n._)("div",a,[(0,n.Wm)(f,{"default-active":e.$route.path,class:"el-menu-demo",mode:"horizontal",onSelect:c.handleSelect,"background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b",router:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{index:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)("首页")])),_:1}),(0,n.Wm)(i,{index:"/"},{title:(0,n.w5)((()=>[(0,n.Uk)("登陆|注册")])),default:(0,n.w5)((()=>[(0,n.Wm)(d,{index:"/Login"},{default:(0,n.w5)((()=>[(0,n.Uk)("登录")])),_:1}),(0,n.Wm)(d,{index:"/Register"},{default:(0,n.w5)((()=>[(0,n.Uk)("注册")])),_:1}),(0,n.Wm)(d,{index:"/user/bookStall"},{default:(0,n.w5)((()=>[(0,n.Uk)("发布")])),_:1})])),_:1}),(0,n.Wm)(d,{index:"/user/mesNotice"},{default:(0,n.w5)((()=>[(0,n.Uk)("消息")])),_:1}),(0,n.Wm)(d,{index:"/user/userOrder"},{default:(0,n.w5)((()=>[(0,n.Uk)("我的订单")])),_:1}),(0,n.Wm)(d,{index:"/user"},{default:(0,n.w5)((()=>[(0,n.Uk)("个人中心")])),_:1})])),_:1},8,["default-active","onSelect"])])])])}var l={name:"NavGation",data(){return{activeIndex:"/"}},methods:{handleSelect(e,t){console.log(e,t)}}},c=o(89);const d=(0,c.Z)(l,[["render",u],["__scopeId","data-v-5a926be1"]]);var i=d},9253:function(e,t,o){o.r(t),o.d(t,{default:function(){return w}});var n=o(3396);const r=e=>((0,n.dD)("data-v-36d792a7"),e=e(),(0,n.Cn)(),e),s={class:"content"},a={class:"login_content"},u=r((()=>(0,n._)("h2",null,"登陆",-1))),l=r((()=>(0,n._)("span",{style:{float:"left"}},[(0,n.Uk)("没有账号？"),(0,n._)("a",{href:"#/Register"},"去注册")],-1))),c=r((()=>(0,n._)("span",{style:{float:"right"}},"忘记密码",-1)));function d(e,t,o,r,d,i){const f=(0,n.up)("Nav"),m=(0,n.up)("el-input"),p=(0,n.up)("el-form-item"),h=(0,n.up)("el-button"),g=(0,n.up)("el-form"),w=(0,n.up)("Footer");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(f),(0,n._)("div",s,[(0,n._)("div",a,[u,(0,n.Wm)(g,{model:d.ruleForm,"status-icon":"",rules:d.rules,ref:"ruleForm"},{default:(0,n.w5)((()=>[(0,n.Wm)(p,{prop:"account"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{type:"text",modelValue:d.ruleForm.account,"onUpdate:modelValue":t[0]||(t[0]=e=>d.ruleForm.account=e),autocomplete:"off",placeholder:"请输入账号"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(p,{prop:"password"},{default:(0,n.w5)((()=>[(0,n.Wm)(m,{type:"password",modelValue:d.ruleForm.password,"onUpdate:modelValue":t[1]||(t[1]=e=>d.ruleForm.password=e),autocomplete:"off",placeholder:"请输入密码"},null,8,["modelValue"])])),_:1}),(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Wm)(h,{type:"primary",onClick:t[2]||(t[2]=e=>i.login("ruleForm")),style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Uk)("登陆")])),_:1})])),_:1}),(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[l,c])),_:1})])),_:1},8,["model","rules"])])]),(0,n.Wm)(w)])}o(7658);var i=o(2900),f=o(8342),m=o(4337),p={name:"LoginPage",components:{Nav:f.Z,Footer:m.Z},data(){var e=(e,t,o)=>{if(!t)return o(new Error("账号不能为空"));setTimeout((()=>{t.length>20?o(new Error("账号不能大于20位")):o()}),1e3)},t=(e,t,o)=>{""===t?o(new Error("请输入密码")):o()};return{ruleForm:{account:"",password:""},rules:{account:[{validator:e,trigger:"blur"}],password:[{validator:t,trigger:"blur"}]}}},methods:{login(e){let t=this;this.$refs[e].validate((e=>{e?(console.log("=====开始登陆======="),console.log("这是最新的测试，但是这里还没发请求"),(0,i.yq)({account:this.ruleForm.account,password:this.ruleForm.password}).then((e=>{if(console.log("收到返回的response,接下来检测状态码"),console.log("再次修改"),1==e.data.code){const o=e.headers["Authorization"];t.$store.commit("SET_TOKE",o);let n=e.data;t.$store.commit("SET_USERINFO",n),"success"==e.data.msg&&(console.log("已收到令牌，登陆成功"),this.$message({type:"success",message:"登录成功！",duration:10}),setTimeout((()=>{this.$router.push({path:"/user/userCenter"})}),10))}else console.log("状态码错误，登录失败"),this.$message({type:"waring",message:"登录失败"})})).catch((()=>{this.$message.error("登录失败")}))):this.$message.error("账号密码不符合要求，登陆失败")}))},resetForm(e){this.$refs[e].resetFields()}}},h=o(89);const g=(0,h.Z)(p,[["render",d],["__scopeId","data-v-36d792a7"]]);var w=g}}]);
//# sourceMappingURL=253.a178fb01.js.map