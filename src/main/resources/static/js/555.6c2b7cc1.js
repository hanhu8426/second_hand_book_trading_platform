"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[555],{2900:function(e,o,t){t.d(o,{Mv:function(){return u},RO:function(){return c},Sr:function(){return m},sz:function(){return d},yq:function(){return s},z$:function(){return i}});var a=t(4161),r=t(6779);const l="http://localhost:8080";function n(e,o={},t="GET"){return new Promise((function(r,l){let n;if("GET"===t){let t="";Object.keys(o).forEach((e=>{t+=e+"="+o[e]+"&"})),""!==t&&(t=t.substring(0,t.lastIndexOf("&")),e=e+"?"+t),n=a.Z.get(e)}else n=a.Z.post(e,o);n.then((function(e){r(e)})).catch((function(e){l(e)}))}))}const s=({account:e,password:o})=>n("http://localhost:8080/Login",{account:e,password:o},"POST"),u=(e,o)=>(0,r.Z)(l+"/Register",{account:e,password:o}),i=()=>(0,r.Z)(l+"/getUserInfo",{}),c=(e,o)=>(0,r.Z)(l+"/user/PwdManage",{oldPassword:e,newPassword:o},"POST"),d=e=>(0,r.Z)(l+"/user/userInfoOne",{charge:e},"POST"),m=(e,o,t,a,n)=>(0,r.Z)(l+"/user/userInfo",{img:e,phone:o,area:t,gender:a,introduction:n},"POST")},5555:function(e,o,t){t.r(o),t.d(o,{default:function(){return W}});var a=t(3396);const r=e=>((0,a.dD)("data-v-da1c336a"),e=e(),(0,a.Cn)(),e),l={class:"content"},n={class:"box_info"},s={class:"tab_box"},u={class:"modify_box"},i={class:"tab_box"},c={class:"modify_box"},d=r((()=>(0,a._)("span",null,"上传头像",-1)));function m(e,o,t,r,m,g){const h=(0,a.up)("el-input"),p=(0,a.up)("el-button"),f=(0,a.up)("el-tab-pane"),w=(0,a.up)("UploadPage"),v=(0,a.up)("el-form-item"),b=(0,a.up)("el-checkbox"),_=(0,a.up)("el-checkbox-group"),I=(0,a.up)("el-dropdown"),y=(0,a.up)("el-form"),k=(0,a.up)("el-tabs");return(0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",n,[(0,a.Wm)(k,{modelValue:m.activeName,"onUpdate:modelValue":o[7]||(o[7]=e=>m.activeName=e),onTabClick:g.handleClick,"stretch:true":"",class:"tabContainer",ref:"chargeName"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{label:"账号充值",name:"first"},{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("div",u,[(0,a.Wm)(h,{type:"text",modelValue:m.chargeNum.charge,"onUpdate:modelValue":o[0]||(o[0]=e=>m.chargeNum.charge=e),autocomplete:"off",placeholder:"请输入金额"},null,8,["modelValue"]),(0,a.Wm)(p,{type:"primary",style:{width:"120px"},"native-type":"submit",onClick:o[1]||(o[1]=e=>g.submitForm_1("chargeName"))},{default:(0,a.w5)((()=>[(0,a.Uk)("确认充值")])),_:1})])])])),_:1}),(0,a.Wm)(f,{label:"个人信息",name:"second",style:{height:"500px"}},{default:(0,a.w5)((()=>[(0,a._)("div",i,[(0,a._)("div",c,[(0,a.Wm)(y,{model:m.InfoForm,"status-icon":"",rules:m.ruleInfo,ref:"InfoForm","label-width":"80px"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{ref:"uploadImg",onClick:g.getImg},{default:(0,a.w5)((()=>[d])),_:1},8,["onClick"]),(0,a.Wm)(v,{prop:"phone",label:"电话号码"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{placeholder:"输入你的手机号码",type:"text",autocomplete:"off",modelValue:this.form_2.phone,"onUpdate:modelValue":o[2]||(o[2]=e=>this.form_2.phone=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(v,{prop:"gender",label:"性别"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:this.InfoForm.gender,"onUpdate:modelValue":o[4]||(o[4]=e=>this.InfoForm.gender=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.form_2.genderOption,(e=>((0,a.wg)(),(0,a.j4)(b,{key:e.type,label:e.value,onClick:o[3]||(o[3]=e=>g.getGender("item"))},null,8,["label"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(v,{prop:"area",label:"校区"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,{style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{modelValue:this.InfoForm.area,"onUpdate:modelValue":o[5]||(o[5]=e=>this.InfoForm.area=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(m.form_2.checkBoxOption,(e=>((0,a.wg)(),(0,a.j4)(b,{key:e.value,label:e.value,onClick:o=>g.getArea(e)},null,8,["label","onClick"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),(0,a.Wm)(v,{prop:"introduction",label:"简介"},{default:(0,a.w5)((()=>[(0,a.Wm)(h,{type:"textarea",placeholder:"说两句介绍自己吧",autocomplete:"off",modelValue:this.InfoForm.introduction,"onUpdate:modelValue":o[6]||(o[6]=e=>this.InfoForm.introduction=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,{type:"primary",style:{width:"120px"},"native-type":"submit",onClick:g.submitForm_2},{default:(0,a.w5)((()=>[(0,a.Uk)("确认修改")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model","rules"])])])])),_:1})])),_:1},8,["modelValue","onTabClick"])])])}t(7658);var g=t(2900);const h=e=>((0,a.dD)("data-v-91d84a22"),e=e(),(0,a.Cn)(),e),p=["src"],f={key:1,class:"el-icon-plus avatar-uploader-icon"},w=h((()=>(0,a._)("span",null,"头像上传",-1)));function v(e,o,t,r,l,n){const s=(0,a.up)("el-upload");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(s,{class:"avatar-uploader",action:"http://localhost:8080/upload","show-file-list":!0,"on-remove":n.handleAvatarFail,"on-success":n.handleAvatarSuccess,"before-upload":n.beforeAvatarUpload,headers:n.headersJWT},{default:(0,a.w5)((()=>[l.imageUrl?((0,a.wg)(),(0,a.iD)("img",{key:0,src:l.imageUrl,class:"avatar",alt:"图片详情"},null,8,p)):((0,a.wg)(),(0,a.iD)("i",f)),w])),_:1},8,["on-remove","on-success","before-upload","headers"])])}var b={name:"UploadPage",data(){return{imageUrl:""}},methods:{handleAvatarSuccess(){console.log()},beforeAvatarUpload(e){const o="image/jpeg"===e.type,t=e.size/1024/1024<2;return o||this.$message.error("上传头像图片只能是 JPG 格式!"),t||this.$message.error("上传头像图片大小不能超过 2MB!"),o&&t},handleAvatarFail(){console.log("文件已被移动")}},computed:{headersJWT(){const e=localStorage.getItem("token");return{Authorization:e}}}},_=t(89);const I=(0,_.Z)(b,[["render",v],["__scopeId","data-v-91d84a22"]]);var y=I,k={name:"UserInfo",components:{UploadPage:y},data(){var e=(e,o,t)=>{if(!o)return t(new Error("充值数额不能为空"))},o=(e,o,t)=>{if(!o)return t(new Error("手机号不能为空"));setTimeout((()=>{o.length>11?t(new Error("手机号不能大于11位")):t()}),1e3)},t=(e,o,t)=>{if(!o)return t(new Error("自我介绍不能为空"));setTimeout((()=>{o.length<5?t(new Error("自我介绍不能少于5个字")):t()}),1e3)};return{chargeNum:{charge:" "},rules:{charge:[{validator:e,trigger:"blur"}]},InfoForm:{img:"",phone:"",area:"",gender:"",introduction:""},ruleInfo:{img:"",phone:[{validator:o,trigger:"blur"}],area:"",gender:"",introduction:[{validator:t,trigger:"blur"}]},activeName:"first",form_2:{checkBoxOption:[{value:"四牌楼校区"},{value:"九龙湖校区"},{value:"丁家桥校区"}],genderOption:[{value:"男",type:0},{value:"女",type:1}]}}},methods:{changeInput(){this.$forceUpdate()},handleClick(e,o){console.log(e,o)},getGender(e){this.InfoForm.gender=e.type},getArea(e){this.InfoForm.area=e.type},submitForm_1(){console.log(this.chargeNum.charge),(0,g.sz)({charge:this.chargeNum.charge}).then((e=>{1==e.data.code?(console.log("=====上传成功======="),console.log("打印余额"),console.log(e.data.data),"success"==e.msg?this.$message({type:"success",message:"上传成功！",duration:1e3}):(this.$message({type:"success",message:"上传成功！",duration:1e3}),setTimeout((()=>{this.$router.push({path:"/user/userCenter"})}),1e3))):this.$message({type:"waring",message:"充值失败"})})).catch((()=>{this.$message.error("充值失败")}))},getImg(){this.InfoForm.img=this.$refs.uploadImg.$data.imageUrl},submitForm_2(){console.log("这是用来测试的输出"),console.log(this.$refs.uploadImg.imageUrl),console.log(this.InfoForm.img),console.log(this.InfoForm.phone),console.log(this.InfoForm.area),console.log(this.InfoForm.gender),console.log(this.InfoForm.introduction),console.log("=====上传表格2======="),(0,g.Sr)({img:this.InfoForm.img,phone:this.InfoForm.phone,area:this.InfoForm.area,gender:this.InfoForm.gender,introduction:this.InfoForm.introduction}).then((e=>{1==e.data.code?(console.log("=====上传成功======="),"success"==e.msg?this.$message({type:"success",message:"上传成功！",duration:1e3}):(this.$message({type:"success",message:"上传成功！",duration:1e3}),setTimeout((()=>{this.$router.push({path:"/user/userCenter"})}),1e3))):this.$message({type:"waring",message:"资料上传失败1"})})).catch((()=>{this.$message.error("资料上传失败2")}))},resetForm(e){this.$refs[e].resetFields()}}};const F=(0,_.Z)(k,[["render",m],["__scopeId","data-v-da1c336a"]]);var W=F}}]);
//# sourceMappingURL=555.6c2b7cc1.js.map