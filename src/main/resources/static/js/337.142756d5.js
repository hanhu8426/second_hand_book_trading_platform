"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[337],{170:function(e,t,s){s.d(t,{DO:function(){return o},RO:function(){return l},hP:function(){return n},qp:function(){return i}});var a=s(6779);const d="http://localhost:8080",l=e=>(0,a.Z)(d+"/addUserAddress",{name:e.name,phone:e.phone,address:e.addr,area:e.area},"POST"),o=e=>(0,a.Z)(d+"/modifyUserAddress",{addId:e.addId,name:e.name,phone:e.phone,address:e.addr,area:e.area},"POST"),i=e=>(0,a.Z)(d+"/delUserAddress",{addId:e}),n=()=>(0,a.Z)(d+"/getUserAddress",{})},9896:function(e,t,s){s.d(t,{G3:function(){return o},Ms:function(){return l},eZ:function(){return i},fA:function(){return n}});var a=s(6779);const d="http://localhost:8080",l=e=>(0,a.Z)(`${d}/getBook/${e}`),o=e=>(0,a.Z)(d+"/getRecBookList",{sort:e}),i=(e,t,s)=>(0,a.Z)(d+"/getBookListBySort",{type:e,page:t,pageSize:s}),n=(e,t,s)=>(0,a.Z)(d+"/getBookListByName",{input:e,page:t,pageSize:s})},1268:function(e,t,s){s.r(t),s.d(t,{default:function(){return de}});var a=s(3396),d=s(7139);const l=e=>((0,a.dD)("data-v-22c2b35e"),e=e(),(0,a.Cn)(),e),o={style:{"background-color":"#f7f7f6",width:"100%","min-width":"1240px"}},i={class:"content"},n=l((()=>(0,a._)("div",{class:"title"},[(0,a._)("h3",null,"收货地址")],-1))),r={class:"list_box"},c=["onClick"],u={class:"name"},h={style:{float:"right","font-size":"14px",color:"#757575"}},p={class:"tel"},m={class:"detail"},_={class:"address_list"},g=l((()=>(0,a._)("i",{class:"el-icon-edit"},null,-1))),f=l((()=>(0,a._)("p",{style:{"font-size":"14px"}},"添加新地址",-1))),v=[g,f],b=l((()=>(0,a._)("div",{class:"title"},[(0,a._)("h3",null,"商品清单")],-1))),k={class:"list_box"},w={class:"bookInfo"},y={class:"book_item"},x={class:"book_detail"},W={class:"book_num"},U={class:"book_money"},I={class:"height_text"},C=(0,a.uE)('<div class="title" data-v-22c2b35e><h3 style="float:left;width:100px;" data-v-22c2b35e>配送方式</h3><span class="height_text" style="margin-left:60px;" data-v-22c2b35e>包邮</span></div><div class="title" data-v-22c2b35e><h3 style="float:left;width:100px;" data-v-22c2b35e>发票</h3><span class="height_text" style="margin-left:60px;" data-v-22c2b35e>电子普通发票个人商品明细</span></div>',2),V={class:"list_box"},z={class:"order_detail"},O={class:"bill_item"},Z=l((()=>(0,a._)("div",{class:"bill_title"},"商品总价:",-1))),$={class:"bill_money height_text"},A={class:"bill_item"},L=l((()=>(0,a._)("div",{class:"bill_title"},"应付总额:",-1))),S={class:"bill_money height_text",style:{"font-size":"22px"}},D={class:"list_box"},N={class:"order_action"},B={class:"address_box"},P=l((()=>(0,a._)("span",{class:"height_text"},"修改",-1))),H={class:"action"};function R(e,t,s,l,g,f){const R=(0,a.up)("Nav"),T=(0,a.up)("HeadNav"),E=(0,a.up)("el-image"),F=(0,a.up)("Footer"),G=(0,a.up)("el-input"),K=(0,a.up)("el-form-item"),M=(0,a.up)("el-form"),Y=(0,a.up)("el-button"),j=(0,a.up)("ChildComponent"),q=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a.Wm)(R),(0,a.Wm)(T),(0,a._)("div",i,[n,(0,a._)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(g.addressList,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{class:(0,d.C_)(["address_list",{selected_address:!0===e.select}]),onClick:e=>f.selectOrderAddress(t),key:e.id},[(0,a._)("div",u,[(0,a.Uk)((0,d.zw)(e.name)+" ",1),(0,a._)("span",h,(0,d.zw)(e.label),1)]),(0,a._)("div",p,(0,d.zw)(e.phone),1),(0,a._)("div",m,(0,d.zw)(e.addr),1)],10,c)))),128)),(0,a._)("div",_,[(0,a._)("div",{class:"add",onClick:t[0]||(t[0]=(...e)=>f.handleAdd&&f.handleAdd(...e))},v)])]),b,(0,a._)("div",k,[(0,a._)("div",w,[(0,a._)("div",y,[(0,a.Wm)(E,{class:"bookImg",src:g.book.image,fit:"fill"},null,8,["src"]),(0,a._)("div",x,[(0,a._)("p",null,(0,d.zw)(g.book.name)+" "+(0,d.zw)(g.book.author),1)])]),(0,a._)("div",W,[(0,a._)("p",null,(0,d.zw)(g.book.price)+" x 1",1)]),(0,a._)("div",U,[(0,a._)("p",I,(0,d.zw)(g.book.price)+"元",1)])])]),C,(0,a._)("div",V,[(0,a._)("div",z,[(0,a._)("div",O,[Z,(0,a._)("div",$,(0,d.zw)(g.book.price)+"元",1)]),(0,a._)("div",A,[L,(0,a._)("div",S,(0,d.zw)(g.book.price)+"元",1)])])]),(0,a._)("div",D,[(0,a._)("div",N,[(0,a._)("div",B,[(0,a._)("p",null,(0,d.zw)(g.address.name)+" "+(0,d.zw)(g.address.phone),1),(0,a._)("p",null,[(0,a.Uk)((0,d.zw)(g.address.addr),1),P])]),(0,a._)("div",H,[(0,a._)("button",{class:"plainBtn",style:{"background-color":"#ff6600",color:"white"},onClick:t[1]||(t[1]=(...e)=>f.submitOrder&&f.submitOrder(...e))},"立刻下单")])])])]),(0,a.Wm)(F),(0,a.Wm)(q,{title:"添加收货地址",visible:g.dialogVisible,"onUpdate:visible":t[8]||(t[8]=e=>g.dialogVisible=e),width:"30%",center:""},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{ref:"form",model:g.address},{default:(0,a.w5)((()=>[(0,a.Wm)(K,null,{default:(0,a.w5)((()=>[(0,a.Wm)(G,{placeholder:"姓名",modelValue:g.address.name,"onUpdate:modelValue":t[2]||(t[2]=e=>g.address.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(K,null,{default:(0,a.w5)((()=>[(0,a.Wm)(G,{placeholder:"手机号",modelValue:g.address.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>g.address.phone=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(K,null,{default:(0,a.w5)((()=>[(0,a.Wm)(G,{type:"textarea",placeholder:"详细地址",modelValue:g.address.addr,"onUpdate:modelValue":t[4]||(t[4]=e=>g.address.addr=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(K,null,{default:(0,a.w5)((()=>[(0,a.Wm)(G,{placeholder:"地址标签",modelValue:g.address.label,"onUpdate:modelValue":t[5]||(t[5]=e=>g.address.label=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),(0,a.Wm)(j,null,{footer:(0,a.w5)((()=>[(0,a.Wm)(Y,{onClick:t[6]||(t[6]=e=>g.dialogVisible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取 消")])),_:1}),(0,a.Wm)(Y,{type:"primary",onClick:t[7]||(t[7]=e=>f.onSubmit("form"))},{default:(0,a.w5)((()=>[(0,a.Uk)("确 定")])),_:1})])),_:1})])),_:1},8,["visible"])])}s(7658);var T=s(3999),E=s(2310),F=s(4337),G=s(170),K=s(9896),M=s(6779);const Y="http://localhost:8080",j=(e,t)=>(0,M.Z)(Y+"/addOrder",{addId:e,bookId:t},"POST"),q={class:"dialog-footer"};function J(e,t,s,d,l,o){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",q,[(0,a.WI)(e.$slots,"footer")])])}var Q={},X=s(89);const ee=(0,X.Z)(Q,[["render",J]]);var te=ee,se={name:"BuyPage",components:{ChildComponent:te,Nav:T.Z,HeadNav:E.Z,Footer:F.Z},data(){return{account:"",book:null,bookId:null,selectId:null,dialogVisible:!1,addressList:[{id:1,name:"小胖",phone:"18988798892",addr:"江西抚州市临川区西大街街道东华理工大学长江学院本部(330006)",area:1,off:!1,select:!1},{id:2,name:"小胖",phone:"18988798892",addr:"江西抚州市临川区西大街街道东华理工大学长江学院本部(330006)",area:1,off:!1,select:!1}],address:{id:null,name:"",phone:"",addr:"",area:null}}},created(){this.bookId=this.$route.params.bookId,this.account=this.$store.getters.getUser.account,this.address.account=this.$store.getters.getUser.account,this.getBook(this.bookId),this.getAddressList(),console.log("接收到参数book："+this.book)},methods:{getBook(e){console.log("我已经传入了bookId：值为："+e),(0,K.Ms)(e).then((e=>{1===e.data.code&&(console.log("接受到code,开始为book赋值："),this.book=e.data.data,console.log("接收到的内容为："+this.book))})).catch((e=>{console.log(e)}))},handleAdd(){this.dialogVisible=!0,this.isEdit=!1},onSubmit(){this.isEdit?this.modifyAddress():this.addAddress()},addAddress(){(0,G.RO)(this.address).then((e=>{console.log(e),1===e.data.code?(this.$message({message:e.data.msg,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.data.msg,type:"warning"})})).catch((e=>{console.log(e)}))},getAddressList(){(0,G.hP)().then((e=>{console.log("已经接受到response:"+e),1===e.data.code?(console.log("response.data:"+e.data),this.addressList=e.data.data,console.log("response.data.data:"+e.data.data),this.addressList.length>0&&(console.log(this.addressList[0]),this.address=this.addressList[0],this.selectId=this.addressList[0].id)):this.$message({message:e.data.msg,type:"warning"})})).catch((e=>{console.log(e)}))},selectOrderAddress(e){this.selectId=this.addressList[e].id,this.address=this.addressList[e]},submitOrder(){this.account=this.$store.getters.getUser.account,console.log("====this.OrderInitDto.account===="+this.account+"====="),j(this.selectId,this.bookId).then((e=>{1===e.data.code?(this.$message({type:"success",message:e.data.msg,duration:1e3}),setTimeout((()=>{this.$router.push({path:"/user/userOrder"})}),1e3)):2===e.data.code&&(this.$message({message:"余额不足，请充值！！！",type:"warning"}),this.$router.push({path:"/userInfo"}))})).catch((()=>{this.$message({message:"下单失败了",type:"warning"})}))}}};const ae=(0,X.Z)(se,[["render",R],["__scopeId","data-v-22c2b35e"]]);var de=ae},4337:function(e,t,s){s.d(t,{Z:function(){return h}});var a=s(3396);const d=e=>((0,a.dD)("data-v-150b6664"),e=e(),(0,a.Cn)(),e),l={class:"footer"},o=d((()=>(0,a._)("div",{class:"content"},[(0,a._)("p",null,"© 2023 想好了没组 软件学院 参考南昌大学黄龙同学作品")],-1))),i=[o];function n(e,t){return(0,a.wg)(),(0,a.iD)("div",l,i)}var r=s(89);const c={},u=(0,r.Z)(c,[["render",n],["__scopeId","data-v-150b6664"]]);var h=u},3999:function(e,t,s){s.d(t,{Z:function(){return u}});var a=s(3396);const d={class:"navClass"},l={class:"content"},o={class:"nav_content"};function i(e,t,s,i,n,r){const c=(0,a.up)("el-menu-item"),u=(0,a.up)("router-link"),h=(0,a.up)("el-submenu"),p=(0,a.up)("el-menu");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a._)("div",l,[(0,a._)("div",o,[(0,a.Wm)(p,{"default-active":e.$route.path,class:"el-menu-demo",mode:"horizontal",onSelect:r.handleSelect,"background-color":"#304156","text-color":"#fff","active-text-color":"#ffd04b",router:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{index:"/"},{default:(0,a.w5)((()=>[(0,a.Uk)("首页")])),_:1}),(0,a.Wm)(h,{index:"/"},{title:(0,a.w5)((()=>[(0,a.Uk)("登陆|注册")])),default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{to:"/Login"},{default:(0,a.w5)((()=>[(0,a.Uk)("登录")])),_:1})])),_:1}),(0,a.Wm)(c,{index:"/RegisterPage"},{default:(0,a.w5)((()=>[(0,a.Uk)("注册")])),_:1}),(0,a.Wm)(c,{index:"/user/bookStall"},{default:(0,a.w5)((()=>[(0,a.Uk)("发布")])),_:1}),(0,a.Wm)(c,{index:"/Upload"},{default:(0,a.w5)((()=>[(0,a.Uk)("测试")])),_:1})])),_:1}),(0,a.Wm)(c,{index:"/user/mesNotice"},{default:(0,a.w5)((()=>[(0,a.Uk)("消息")])),_:1}),(0,a.Wm)(c,{index:"/user/userOrder"},{default:(0,a.w5)((()=>[(0,a.Uk)("我的订单")])),_:1}),(0,a.Wm)(c,{index:"/user"},{default:(0,a.w5)((()=>[(0,a.Uk)("个人中心")])),_:1})])),_:1},8,["default-active","onSelect"])])])])}var n={name:"NavGation",data(){return{activeIndex:"/"}},methods:{handleSelect(e,t){console.log(e,t)}}},r=s(89);const c=(0,r.Z)(n,[["render",i],["__scopeId","data-v-20602ede"]]);var u=c},2310:function(e,t,s){s.d(t,{Z:function(){return m}});var a=s(3396),d=s(7139);const l=e=>((0,a.dD)("data-v-32d86536"),e=e(),(0,a.Cn)(),e),o={class:"headNav"},i={class:"content"},n=l((()=>(0,a._)("div",{style:{float:"left"}},[(0,a._)("div",{style:{width:"232px",height:"40px","vertical-align":"middle","font-family":"宋体","font-size":"38px","font-style":"italic"}}," 东大二手书网 ")],-1))),r={style:{float:"right"}};function c(e,t,s,l,c,u){const h=(0,a.up)("el-option"),p=(0,a.up)("el-select"),m=(0,a.up)("el-input"),_=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",i,[n,(0,a._)("div",r,[(0,a.Wm)(p,{modelValue:c.select,"onUpdate:modelValue":t[0]||(t[0]=e=>c.select=e),placeholder:"请选择",class:"search-type",onChange:u.handleOptionChange},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.type_list,(e=>((0,a.wg)(),(0,a.j4)(h,{key:e.value,value:e.typeName},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(e.typeName),1)])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue","onChange"]),(0,a.Wm)(m,{modelValue:c.input,"onUpdate:modelValue":t[1]||(t[1]=e=>c.input=e),placeholder:"书名、作者",class:"input-with-select",style:{width:"400px",height:"40px"}},null,8,["modelValue"]),(0,a.Wm)(_,{icon:"el-icon-search",class:"search-button",onClick:u.search},{default:(0,a.w5)((()=>[(0,a.Uk)("搜索")])),_:1},8,["onClick"])])])])}s(7658);var u={name:"HeadNav",data(){return{rel:"",input:"",select:"",type_list:[{typeName:"书名",value:"0"},{typeName:"作者",value:"1"}],imgS:s(3352)}},computed:{},methods:{handleOptionChange(e){"option1"===e?this.handleOption1():"option2"===e&&this.handleOption2()},handleOption1(){this.select=0},handleOption2(){this.select=1},search(){this.$router.push({name:"Search",params:{selectResult:this.select,inputContent:this.input}})}}},h=s(89);const p=(0,h.Z)(u,[["render",c],["__scopeId","data-v-32d86536"]]);var m=p},3352:function(e,t,s){e.exports=s.p+"img/logo-250.fa9ad888.png"}}]);
//# sourceMappingURL=337.142756d5.js.map