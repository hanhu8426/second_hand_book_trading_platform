"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[932],{170:function(e,s,d){d.d(s,{DO:function(){return o},RO:function(){return t},hP:function(){return n},qp:function(){return i}});var a=d(6779);const l="http://localhost:8080",t=e=>(0,a.Z)(l+"/addUserAddress",{name:e.name,phone:e.phone,address:e.address,area:e.area,id:e.id},"POST"),o=e=>(0,a.Z)(l+"/modifyUserAddress",{addId:e.addId,name:e.name,phone:e.phone,address:e.address,area:e.area},"POST"),i=e=>(0,a.Z)(l+"/delUserAddress",{addId:e}),n=()=>(0,a.Z)(l+"/getUserAddress",{})},1932:function(e,s,d){d.r(s),d.d(s,{default:function(){return U}});var a=d(3396),l=d(7139);const t=e=>((0,a.dD)("data-v-1a2dd10d"),e=e(),(0,a.Cn)(),e),o={class:"content"},i=t((()=>(0,a._)("h1",null,"收货地址",-1))),n={class:"box_info"},r={class:"address_list"},c=t((()=>(0,a._)("i",{class:"el-icon-edit"},null,-1))),m=t((()=>(0,a._)("p",{style:{"font-size":"14px"}},"添加新地址",-1))),h=[c,m],u={class:"name"},g={style:{float:"right","font-size":"14px",color:"#757575"}},p={class:"tel"},f={class:"detail"},_={class:"foot"},w=["onClick"],V=["onClick"],b={class:"dialog-footer"};function y(e,s,d,t,c,m){const y=(0,a.up)("el-input"),A=(0,a.up)("el-form-item"),k=(0,a.up)("el-option"),v=(0,a.up)("el-select"),W=(0,a.up)("el-dropdown"),U=(0,a.up)("el-form"),C=(0,a.up)("el-button"),$=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.iD)("div",o,[i,(0,a._)("div",n,[(0,a._)("div",r,[(0,a._)("div",{class:"add",onClick:s[0]||(s[0]=(...e)=>m.handleAdd&&m.handleAdd(...e))},h)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(c.addressList,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"address_list",key:e.addId},[(0,a._)("div",u,[(0,a.Uk)((0,l.zw)(e.name)+" ",1),(0,a._)("span",g,(0,l.zw)(e.area),1)]),(0,a._)("span",p,(0,l.zw)(e.phone),1),(0,a._)("span",f,(0,l.zw)(e.addr),1),(0,a._)("div",_,[(0,a._)("span",{style:{float:"right"},onClick:s=>m.delAddress(e.addId)},"删除",8,w),(0,a._)("span",{style:{float:"right","margin-right":"10px"},onClick:s=>m.handleMod(e)},"修改",8,V)])])))),128))]),(0,a.Wm)($,{title:"添加收货地址",modelValue:c.dialogVisible,"onUpdate:modelValue":s[7]||(s[7]=e=>c.dialogVisible=e),width:"30%",center:""},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{ref:"form",model:c.address},{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{placeholder:"姓名",modelValue:c.address.name,"onUpdate:modelValue":s[1]||(s[1]=e=>c.address.name=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{placeholder:"手机号",modelValue:c.address.phone,"onUpdate:modelValue":s[2]||(s[2]=e=>c.address.phone=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{type:"textarea",placeholder:"详细地址",modelValue:c.address.addr,"onUpdate:modelValue":s[3]||(s[3]=e=>c.address.addr=e)},null,8,["modelValue"])])),_:1}),(0,a.Wm)(A,{prop:"area"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(v,{modelValue:c.address.area,"onUpdate:modelValue":s[4]||(s[4]=e=>c.address.area=e),placeholder:"请选择校区"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{label:"四牌楼校区",value:"四牌楼校区"}),(0,a.Wm)(k,{label:"九龙湖校区",value:"九龙湖校区"}),(0,a.Wm)(k,{label:"丁家桥校区",value:"丁家桥校区"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["model"]),(0,a._)("span",b,[(0,a.Wm)(C,{onClick:s[5]||(s[5]=e=>c.dialogVisible=!1)},{default:(0,a.w5)((()=>[(0,a.Uk)("取 消")])),_:1}),(0,a.Wm)(C,{type:"primary",onClick:s[6]||(s[6]=e=>m.onSubmit("form"))},{default:(0,a.w5)((()=>[(0,a.Uk)("确 定")])),_:1})])])),_:1},8,["modelValue"])])}var A=d(170),k={name:"AddressPage",data(){return{dialogVisible:!1,isEdit:!1,addressList:[],address:{addId:"",name:"",phone:"",addr:"",area:""}}},created(){console.log("开始生命构建，获取该用户的所有地址数据"),this.getAddressList()},mounted(){console.log("重新渲染页面"),this.getAddressList()},methods:{handleAdd(){this.dialogVisible=!0,this.isEdit=!1},handleMod(e){this.dialogVisible=!0,this.isEdit=!0,this.address.addId=e.addId,this.address.account=e.account,this.address.name=e.name,this.address.phone=e.phone,this.address.addr=e.addr,this.address.label=e.label},onSubmit(){this.isEdit?this.modifyAddress():this.addAddress()},getAddressList(){console.log("===获取的地址列表：==="+this.$store.getters.getUser.account+"====="),(0,A.hP)().then((e=>{if(console.log(e),1===e.data.code){let s=e.data.data;console.log(s),this.addressList=s}else this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},addAddress(){console.log("尝试添加地址"),console.log(this.address),(0,A.RO)(this.address).then((e=>{console.log(e),1===e.data.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},modifyAddress(){console.log("这是修改地址的测试"),console.log(this.address),(0,A.DO)(this.address).then((e=>{console.log(e),1==e.data.code?(this.$message({message:e.message,type:"success"}),this.dialogVisible=!1,this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))},delAddress(e){this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,A.qp)(e).then((e=>{console.log(e),1==e.data.code?(this.$message({message:e.message,type:"success"}),this.getAddressList()):this.$message({message:e.message,type:"warning"})})).catch((e=>{console.log(e)}))})).catch((()=>{console.log("取消删除了")}))},resetForm(e){this.$refs[e].resetFields()}}},v=d(89);const W=(0,v.Z)(k,[["render",y],["__scopeId","data-v-1a2dd10d"]]);var U=W}}]);
//# sourceMappingURL=932.3ee08f78.js.map