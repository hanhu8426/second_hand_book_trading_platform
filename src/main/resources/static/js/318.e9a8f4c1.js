"use strict";(self["webpackChunkbook_02"]=self["webpackChunkbook_02"]||[]).push([[318],{2900:function(e,r,o){o.d(r,{Mv:function(){return d},RO:function(){return m},dR:function(){return n},yq:function(){return u}});var s=o(4161),t=o(6789);function a(e,r={},o="GET"){return new Promise((function(t,a){let l;if("GET"===o){let o="";Object.keys(r).forEach((e=>{o+=e+"="+r[e]+"&"})),""!==o&&(o=o.substring(0,o.lastIndexOf("&")),e=e+"?"+o),l=s.Z.get(e)}else l=s.Z.post(e,r);l.then((function(e){t(e)})).catch((function(e){a(e)}))}))}const l="http://localhost:8080",u=({account:e,password:r})=>a("http://localhost:8080/Login",{account:e,password:r},"POST"),n=({account:e})=>(0,t.Z)(l+"/user/accountVerify",{account:e}),d=(e,r)=>(0,t.Z)(l+"/user/register",{account:e,password:r}),m=(e,r,o)=>(0,t.Z)(l+"/modifyUserPwd",{account:e,oldPassword:r,newPassword:o})},8318:function(e,r,o){o.r(r),o.d(r,{default:function(){return p}});var s=o(3396);const t=e=>((0,s.dD)("data-v-1a85dcdc"),e=e(),(0,s.Cn)(),e),a={class:"content"},l=t((()=>(0,s._)("h1",null,"修改密码",-1))),u={class:"box_info"},n={class:"modify_box"};function d(e,r,o,t,d,m){const c=(0,s.up)("el-input"),i=(0,s.up)("el-form-item"),w=(0,s.up)("el-button"),p=(0,s.up)("el-form");return(0,s.wg)(),(0,s.iD)("div",a,[l,(0,s._)("div",u,[(0,s._)("div",n,[(0,s.Wm)(p,{model:d.ruleForm,"status-icon":"",rules:d.rules,ref:"ruleForm",class:"demo-ruleForm",size:"medium"},{default:(0,s.w5)((()=>[(0,s.Wm)(i,{prop:"oldPassword"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{type:"text",modelValue:d.ruleForm.oldPassword,"onUpdate:modelValue":r[0]||(r[0]=e=>d.ruleForm.oldPassword=e),autocomplete:"off",placeholder:"请输入旧密码"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(i,{prop:"newPassword"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{type:"password",modelValue:d.ruleForm.newPassword,"onUpdate:modelValue":r[1]||(r[1]=e=>d.ruleForm.newPassword=e),autocomplete:"off",placeholder:"请输入新密码"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(i,{prop:"rePassword"},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{type:"password",modelValue:d.ruleForm.rePassword,"onUpdate:modelValue":r[2]||(r[2]=e=>d.ruleForm.rePassword=e),autocomplete:"off",placeholder:"密码确认"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(i,null,{default:(0,s.w5)((()=>[(0,s.Wm)(w,{type:"primary",onClick:r[3]||(r[3]=e=>m.submitForm("ruleForm")),style:{width:"40%",margin:"0px auto"}},{default:(0,s.w5)((()=>[(0,s.Uk)("修改密码")])),_:1})])),_:1})])),_:1},8,["model","rules"])])])])}o(7658);var m=o(2900),c={name:"PwdManage",data(){let e=(e,r,o)=>{""===r?o(new Error("请输入密码")):r.length<3?o(new Error("密码长度不能小于8")):o()},r=(e,r,o)=>{r!==this.ruleForm.newPassword?o(new Error("密码不一致")):o()};return{ruleForm:{oldPassword:"",newPassword:"",rePassword:""},rules:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{validator:e,trigger:"blur"}],rePassword:[{validator:r,trigger:"blur"}]}}},methods:{submitForm(e){this.$refs[e].validate((e=>{if(!e)return this.$message.error("数据不符合要求，不能进行注册"),!1;console.log("=====this.ruleForm.oldPassword:========"+this.ruleForm.newPassword+"===="),(0,m.RO)(this.$store.getters.getUser.account,this.ruleForm.oldPassword,this.ruleForm.newPassword).then((e=>{200==e.code?(console.log("=====注册成功====="),this.$message({type:"success",message:e.message,duration:1e3}),setTimeout((()=>{this.$router.push({path:"/login"})}),1e3)):this.$message({type:"waring",message:e.message,duration:1e3})})).catch((e=>{this.$message({type:"waring",message:"修改密码失败",duration:1e3})}))}))},resetForm(e){this.$refs[e].resetFields()}}},i=o(89);const w=(0,i.Z)(c,[["render",d],["__scopeId","data-v-1a85dcdc"]]);var p=w}}]);
//# sourceMappingURL=318.e9a8f4c1.js.map